import{_ as Le}from"./SiteScroll.vue_vue_type_script_setup_true_lang-CMJmXBGq.js";import{g as Ne,E as Ce}from"./TipTap_Extensions-wb9O3wSk.js";import{d as O,r as x,o as H,c as T,a as k,n as F,u as _,b as $,e as f,t as R,f as y,g as he,h as je,i as J,w as X,j as ee,k as Be,l as te,m as P,p as U,q as He,s as Ue,F as C,v as be,x as ze,y as Ve,z as N,A as D,B as Ke,C as ge,T as We,D as xe,E as j,G as q,H as qe,I as ae,J as Ge,K as Je,L as Xe}from"./index-GbOvM6Dh.js";import{_ as _e,d as ye,D as we,g as Te,u as Ze,a as Qe,b as Ye,c as et}from"./NavigationTempl.vue_vue_type_script_setup_true_lang-CyG2qCzQ.js";import{O as Ie,_ as tt,a as nt,A as ie}from"./DomainTime.vue_vue_type_script_setup_true_lang-CEi2AhPB.js";import{s as rt}from"./useArticle-B1kutxUm.js";const ot=["innerHTML"],lt='\n    {\n        "type":"doc",\n        "content":[{\n            "type":"paragraph",\n            "content":[{\n                "type":"text",\n                "text":" "\n            }]\n        }]\n    }\n',st=O({__name:"DArticle",props:{propsArticleTempl:{}},setup(e){const n=e,o=x("");H(()=>{const l=JSON.parse(n.propsArticleTempl.articleHtmlRef);o.value=Ne(l!=null?l:lt,Ce)});const s=T(()=>{var r;return(r=n.propsArticleTempl)==null?void 0:r.isDomainFormat});return(l,r)=>($(),k("article",{innerHTML:_(o),class:F([{"amDomain-format":_(s)}])},null,10,ot))}}),$e=_e(st,[["__scopeId","data-v-4a388fcc"]]),at={class:"border-l mt-10 pl-5 border-dashed border-stone-400"},it={class:"flex gap-2 py-3 border-b border-stone-400"},ut={class:"text-lg font-bold leading-4"},ct={class:"text-[12px] leading-4"},dt={class:"flex mt-5"},pt=O({__name:"MessageTempl",props:{propsMessageTempl:{}},setup(e){const n=e,o=T(()=>({articleHtmlRef:n.propsMessageTempl.articleHtmlRef,isDomainFormat:n.propsMessageTempl.isDomainFormat}));return x(""),T(()=>[Ie.REPORT]),(s,l)=>{const r=tt,t=$e;return $(),k("div",at,[f("div",it,[f("p",ut,R(n.propsMessageTempl.floor)+"樓 ",1),f("p",ct,[y(r,{paramTime:n.propsMessageTempl.time,fromNow:""},null,8,["paramTime"])])]),f("div",dt,[y(t,{propsArticleTempl:_(o)},null,8,["propsArticleTempl"])])])}}}),mt={class:"flex gap-1"},ft=["disabled"],vt={class:"flex items-center p-1.5 rounded"},ht={class:"mr-1"},bt=["disabled"],gt={class:"flex items-center p-1.5 rounded"},xt={class:"mr-1"},_t=O({__name:"RatingBarComponents",props:{ratingTable:{required:!0},ratingTableModifiers:{},rated:{},ratedModifiers:{}},emits:["update:ratingTable","update:rated"],setup(e){const n=he(),o=je(),s=ye(we,"articles",n.article),l=x(),r=x(!1);H(async()=>{var p;const h=await Te(s);l.value=h.data().analyze,r.value=(p=l.value.ratedLists)==null?void 0:p.hasOwnProperty(o.name),console.log(r)});const t=async h=>{var a,u,c,b;if(!l.value)return;i.value.nice+=(a=h.nice)!=null?a:0,i.value.bad+=(u=h.bad)!=null?u:0,r.value=!0,v.value={nice:(c=h.nice)!=null?c:0,bad:(b=h.bad)!=null?b:0};const p=l.value.rating.nice+v.value.nice,m=l.value.rating.bad+v.value.bad;await Ze(s,{analyze:{rating:{nice:p,bad:m},ratedLists:{[o.name]:h}}},{merge:!0})},i=J(e,"ratingTable"),v=J(e,"rated");return(h,p)=>{const m=ee("Icon");return $(),k("div",mt,[f("button",{disabled:_(r),onClick:p[0]||(p[0]=X(a=>t({nice:1}),["stop"])),class:F(["normal-button disabled:select-none disabled:text-stone-500/70",[{"select-none text-stone-500/70":v.value}]])},[f("div",vt,[f("p",ht,R(i.value.nice),1),y(m,{icon:"ic:sharp-thumb-up-alt",class:"w-5 h-5"})])],10,ft),f("button",{disabled:_(r),onClick:p[1]||(p[1]=X(a=>t({bad:1}),["stop"])),class:F(["normal-button disabled:select-none disabled:text-stone-500/70",[{"select-none text-stone-500/70":v.value}]])},[f("div",gt,[f("p",xt,R(i.value.bad),1),y(m,{icon:"ic:sharp-thumb-down-alt",class:"w-5 h-5"})])],10,bt)])}}});var ue;let yt=Symbol("headlessui.useid"),wt=0;const ne=(ue=Be)!=null?ue:function(){return te(yt,()=>"".concat(++wt))()};function w(e){var n;if(e==null||e.value==null)return null;let o=(n=e.value.$el)!=null?n:e.value;return o instanceof Node?o:null}function V(e,n,...o){if(e in n){let l=n[e];return typeof l=="function"?l(...o):l}let s=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(n).map(l=>'"'.concat(l,'"')).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(s,V),s}var Tt=Object.defineProperty,It=(e,n,o)=>n in e?Tt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ce=(e,n,o)=>(It(e,typeof n!="symbol"?n+"":n,o),o);let $t=class{constructor(){ce(this,"current",this.detect()),ce(this,"currentId",0)}set(n){this.current!==n&&(this.currentId=0,this.current=n)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},re=new $t;function oe(e){if(re.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let n=w(e);if(n)return n.ownerDocument}return document}let Z=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>"".concat(e,":not([tabindex='-1'])")).join(",");var Q=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Q||{}),Et=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Et||{}),St=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(St||{});function Ee(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Z)).sort((n,o)=>Math.sign((n.tabIndex||Number.MAX_SAFE_INTEGER)-(o.tabIndex||Number.MAX_SAFE_INTEGER)))}var le=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(le||{});function se(e,n=0){var o;return e===((o=oe(e))==null?void 0:o.body)?!1:V(n,{0(){return e.matches(Z)},1(){let s=e;for(;s!==null;){if(s.matches(Z))return!0;s=s.parentElement}return!1}})}function Se(e){let n=oe(e);P(()=>{n&&!se(n.activeElement,0)&&Ot(e)})}var kt=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(kt||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Ot(e){e==null||e.focus({preventScroll:!0})}let Mt=["textarea","input"].join(",");function At(e){var n,o;return(o=(n=e==null?void 0:e.matches)==null?void 0:n.call(e,Mt))!=null?o:!1}function ke(e,n=o=>o){return e.slice().sort((o,s)=>{let l=n(o),r=n(s);if(l===null||r===null)return 0;let t=l.compareDocumentPosition(r);return t&Node.DOCUMENT_POSITION_FOLLOWING?-1:t&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Dt(e,n){return Ft(Ee(),n,{relativeTo:e})}function Ft(e,n,{sorted:o=!0,relativeTo:s=null,skipElements:l=[]}={}){var r;let t=(r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?r:document,i=Array.isArray(e)?o?ke(e):e:Ee(e);l.length>0&&i.length>1&&(i=i.filter(c=>!l.includes(c))),s=s!=null?s:t.activeElement;let v=(()=>{if(n&5)return 1;if(n&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(n&1)return 0;if(n&2)return Math.max(0,i.indexOf(s))-1;if(n&4)return Math.max(0,i.indexOf(s))+1;if(n&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=n&32?{preventScroll:!0}:{},m=0,a=i.length,u;do{if(m>=a||m+a<=0)return 0;let c=h+m;if(n&16)c=(c+a)%a;else{if(c<0)return 3;if(c>=a)return 1}u=i[c],u==null||u.focus(p),m+=v}while(u!==t.activeElement);return n&6&&At(u)&&u.select(),2}function Pt(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Rt(){return/Android/gi.test(window.navigator.userAgent)}function Lt(){return Pt()||Rt()}function z(e,n,o){re.isServer||U(s=>{document.addEventListener(e,n,o),s(()=>document.removeEventListener(e,n,o))})}function Nt(e,n,o){re.isServer||U(s=>{window.addEventListener(e,n,o),s(()=>window.removeEventListener(e,n,o))})}function Ct(e,n,o=T(()=>!0)){function s(r,t){if(!o.value||r.defaultPrevented)return;let i=t(r);if(i===null||!i.getRootNode().contains(i))return;let v=function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e);for(let h of v){if(h===null)continue;let p=h instanceof HTMLElement?h:w(h);if(p!=null&&p.contains(i)||r.composed&&r.composedPath().includes(p))return}return!se(i,le.Loose)&&i.tabIndex!==-1&&r.preventDefault(),n(r,i)}let l=x(null);z("pointerdown",r=>{var t,i;o.value&&(l.value=((i=(t=r.composedPath)==null?void 0:t.call(r))==null?void 0:i[0])||r.target)},!0),z("mousedown",r=>{var t,i;o.value&&(l.value=((i=(t=r.composedPath)==null?void 0:t.call(r))==null?void 0:i[0])||r.target)},!0),z("click",r=>{Lt()||l.value&&(s(r,()=>l.value),l.value=null)},!0),z("touchend",r=>s(r,()=>r.target instanceof HTMLElement?r.target:null),!0),Nt("blur",r=>s(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function de(e,n){if(e)return e;let o=n!=null?n:"button";if(typeof o=="string"&&o.toLowerCase()==="button")return"button"}function jt(e,n){let o=x(de(e.value.type,e.value.as));return H(()=>{o.value=de(e.value.type,e.value.as)}),U(()=>{var s;o.value||w(n)&&w(n)instanceof HTMLButtonElement&&!((s=w(n))!=null&&s.hasAttribute("type"))&&(o.value="button")}),o}function pe(e){return[e.screenX,e.screenY]}function Bt(){let e=x([-1,-1]);return{wasMoved(n){let o=pe(n);return e.value[0]===o[0]&&e.value[1]===o[1]?!1:(e.value=o,!0)},update(n){e.value=pe(n)}}}function Ht({container:e,accept:n,walk:o,enabled:s}){U(()=>{let l=e.value;if(!l||s!==void 0&&!s.value)return;let r=oe(e);if(!r)return;let t=Object.assign(v=>n(v),{acceptNode:n}),i=r.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,t,!1);for(;i.nextNode();)o(i.currentNode)})}var Y=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Y||{}),Ut=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Ut||{});function K({visible:e=!0,features:n=0,ourProps:o,theirProps:s,...l}){var r;let t=Me(s,o),i=Object.assign(l,{props:t});if(e||n&2&&t.static)return G(i);if(n&1){let v=(r=t.unmount)==null||r?0:1;return V(v,{0(){return null},1(){return G({...l,props:{...t,hidden:!0,style:{display:"none"}}})}})}return G(i)}function G({props:e,attrs:n,slots:o,slot:s,name:l}){var r,t;let{as:i,...v}=zt(e,["unmount","static"]),h=(r=o.default)==null?void 0:r.call(o,s),p={};if(s){let m=!1,a=[];for(let[u,c]of Object.entries(s))typeof c=="boolean"&&(m=!0),c===!0&&a.push(u);m&&(p["data-headlessui-state"]=a.join(" "))}if(i==="template"){if(h=Oe(h!=null?h:[]),Object.keys(v).length>0||Object.keys(n).length>0){let[m,...a]=h!=null?h:[];if(!Vt(m)||a.length>0)throw new Error(['Passing props on "template"!',"","The current component <".concat(l,' /> is rendering a "template".'),"However we need to passthrough the following props:",Object.keys(v).concat(Object.keys(n)).map(b=>b.trim()).filter((b,g,d)=>d.indexOf(b)===g).sort((b,g)=>b.localeCompare(g)).map(b=>"  - ".concat(b)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>"  - ".concat(b)).join("\n")].join("\n"));let u=Me((t=m.props)!=null?t:{},v,p),c=He(m,u,!0);for(let b in u)b.startsWith("on")&&(c.props||(c.props={}),c.props[b]=u[b]);return c}return Array.isArray(h)&&h.length===1?h[0]:h}return Ue(i,Object.assign({},v,p),{default:()=>h})}function Oe(e){return e.flatMap(n=>n.type===C?Oe(n.children):[n])}function Me(...e){if(e.length===0)return{};if(e.length===1)return e[0];let n={},o={};for(let s of e)for(let l in s)l.startsWith("on")&&typeof s[l]=="function"?(o[l]!=null||(o[l]=[]),o[l].push(s[l])):n[l]=s[l];if(n.disabled||n["aria-disabled"])return Object.assign(n,Object.fromEntries(Object.keys(o).map(s=>[s,void 0])));for(let s in o)Object.assign(n,{[s](l,...r){let t=o[s];for(let i of t){if(l instanceof Event&&l.defaultPrevented)return;i(l,...r)}}});return n}function zt(e,n=[]){let o=Object.assign({},e);for(let s of n)s in o&&delete o[s];return o}function Vt(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Ae=Symbol("Context");var B=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(B||{});function Kt(){return te(Ae,null)}function Wt(e){be(Ae,e)}var I=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(I||{});function qt(e){throw new Error("Unexpected object: "+e)}var S=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(S||{});function Gt(e,n){let o=n.resolveItems();if(o.length<=0)return null;let s=n.resolveActiveIndex(),l=s!=null?s:-1;switch(e.focus){case 0:{for(let r=0;r<o.length;++r)if(!n.resolveDisabled(o[r],r,o))return r;return s}case 1:{l===-1&&(l=o.length);for(let r=l-1;r>=0;--r)if(!n.resolveDisabled(o[r],r,o))return r;return s}case 2:{for(let r=l+1;r<o.length;++r)if(!n.resolveDisabled(o[r],r,o))return r;return s}case 3:{for(let r=o.length-1;r>=0;--r)if(!n.resolveDisabled(o[r],r,o))return r;return s}case 4:{for(let r=0;r<o.length;++r)if(n.resolveId(o[r],r,o)===e.id)return r;return s}case 5:return null;default:qt(e)}}let me=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function fe(e){var n,o;let s=(n=e.innerText)!=null?n:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return s;let r=!1;for(let i of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),r=!0;let t=r?(o=l.innerText)!=null?o:"":s;return me.test(t)&&(t=t.replace(me,"")),t}function Jt(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let o=e.getAttribute("aria-labelledby");if(o){let s=o.split(" ").map(l=>{let r=document.getElementById(l);if(r){let t=r.getAttribute("aria-label");return typeof t=="string"?t.trim():fe(r).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return fe(e).trim()}function Xt(e){let n=x(""),o=x("");return()=>{let s=w(e);if(!s)return"";let l=s.innerText;if(n.value===l)return o.value;let r=Jt(s).trim().toLowerCase();return n.value=l,o.value=r,r}}var Zt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Zt||{}),Qt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Qt||{});function Yt(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let De=Symbol("MenuContext");function W(e){let n=te(De,null);if(n===null){let o=new Error("<".concat(e," /> is missing a parent <Menu /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(o,W),o}return n}let en=O({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:n,attrs:o}){let s=x(1),l=x(null),r=x(null),t=x([]),i=x(""),v=x(null),h=x(1);function p(a=u=>u){let u=v.value!==null?t.value[v.value]:null,c=ke(a(t.value.slice()),g=>w(g.dataRef.domRef)),b=u?c.indexOf(u):null;return b===-1&&(b=null),{items:c,activeItemIndex:b}}let m={menuState:s,buttonRef:l,itemsRef:r,items:t,searchQuery:i,activeItemIndex:v,activationTrigger:h,closeMenu:()=>{s.value=1,v.value=null},openMenu:()=>s.value=0,goToItem(a,u,c){let b=p(),g=Gt(a===S.Specific?{focus:S.Specific,id:u}:{focus:a},{resolveItems:()=>b.items,resolveActiveIndex:()=>b.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.disabled});i.value="",v.value=g,h.value=c!=null?c:1,t.value=b.items},search(a){let u=i.value!==""?0:1;i.value+=a.toLowerCase();let c=(v.value!==null?t.value.slice(v.value+u).concat(t.value.slice(0,v.value+u)):t.value).find(g=>g.dataRef.textValue.startsWith(i.value)&&!g.dataRef.disabled),b=c?t.value.indexOf(c):-1;b===-1||b===v.value||(v.value=b,h.value=1)},clearSearch(){i.value=""},registerItem(a,u){let c=p(b=>[...b,{id:a,dataRef:u}]);t.value=c.items,v.value=c.activeItemIndex,h.value=1},unregisterItem(a){let u=p(c=>{let b=c.findIndex(g=>g.id===a);return b!==-1&&c.splice(b,1),c});t.value=u.items,v.value=u.activeItemIndex,h.value=1}};return Ct([l,r],(a,u)=>{var c;m.closeMenu(),se(u,le.Loose)||(a.preventDefault(),(c=w(l))==null||c.focus())},T(()=>s.value===0)),be(De,m),Wt(T(()=>V(s.value,{0:B.Open,1:B.Closed}))),()=>{let a={open:s.value===0,close:m.closeMenu};return K({ourProps:{},theirProps:e,slot:a,slots:n,attrs:o,name:"Menu"})}}}),ve=O({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:n,slots:o,expose:s}){var l;let r=(l=e.id)!=null?l:"headlessui-menu-button-".concat(ne()),t=W("MenuButton");s({el:t.buttonRef,$el:t.buttonRef});function i(m){switch(m.key){case I.Space:case I.Enter:case I.ArrowDown:m.preventDefault(),m.stopPropagation(),t.openMenu(),P(()=>{var a;(a=w(t.itemsRef))==null||a.focus({preventScroll:!0}),t.goToItem(S.First)});break;case I.ArrowUp:m.preventDefault(),m.stopPropagation(),t.openMenu(),P(()=>{var a;(a=w(t.itemsRef))==null||a.focus({preventScroll:!0}),t.goToItem(S.Last)});break}}function v(m){switch(m.key){case I.Space:m.preventDefault();break}}function h(m){e.disabled||(t.menuState.value===0?(t.closeMenu(),P(()=>{var a;return(a=w(t.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(m.preventDefault(),t.openMenu(),Yt(()=>{var a;return(a=w(t.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let p=jt(T(()=>({as:e.as,type:n.type})),t.buttonRef);return()=>{var m;let a={open:t.menuState.value===0},{...u}=e,c={ref:t.buttonRef,id:r,type:p.value,"aria-haspopup":"menu","aria-controls":(m=w(t.itemsRef))==null?void 0:m.id,"aria-expanded":t.menuState.value===0,onKeydown:i,onKeyup:v,onClick:h};return K({ourProps:c,theirProps:u,slot:a,attrs:n,slots:o,name:"MenuButton"})}}}),tn=O({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:n,slots:o,expose:s}){var l;let r=(l=e.id)!=null?l:"headlessui-menu-items-".concat(ne()),t=W("MenuItems"),i=x(null);s({el:t.itemsRef,$el:t.itemsRef}),Ht({container:T(()=>w(t.itemsRef)),enabled:T(()=>t.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function v(a){var u;switch(i.value&&clearTimeout(i.value),a.key){case I.Space:if(t.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),t.search(a.key);case I.Enter:if(a.preventDefault(),a.stopPropagation(),t.activeItemIndex.value!==null){let c=t.items.value[t.activeItemIndex.value];(u=w(c.dataRef.domRef))==null||u.click()}t.closeMenu(),Se(w(t.buttonRef));break;case I.ArrowDown:return a.preventDefault(),a.stopPropagation(),t.goToItem(S.Next);case I.ArrowUp:return a.preventDefault(),a.stopPropagation(),t.goToItem(S.Previous);case I.Home:case I.PageUp:return a.preventDefault(),a.stopPropagation(),t.goToItem(S.First);case I.End:case I.PageDown:return a.preventDefault(),a.stopPropagation(),t.goToItem(S.Last);case I.Escape:a.preventDefault(),a.stopPropagation(),t.closeMenu(),P(()=>{var c;return(c=w(t.buttonRef))==null?void 0:c.focus({preventScroll:!0})});break;case I.Tab:a.preventDefault(),a.stopPropagation(),t.closeMenu(),P(()=>Dt(w(t.buttonRef),a.shiftKey?Q.Previous:Q.Next));break;default:a.key.length===1&&(t.search(a.key),i.value=setTimeout(()=>t.clearSearch(),350));break}}function h(a){switch(a.key){case I.Space:a.preventDefault();break}}let p=Kt(),m=T(()=>p!==null?(p.value&B.Open)===B.Open:t.menuState.value===0);return()=>{var a,u;let c={open:t.menuState.value===0},{...b}=e,g={"aria-activedescendant":t.activeItemIndex.value===null||(a=t.items.value[t.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(u=w(t.buttonRef))==null?void 0:u.id,id:r,onKeydown:v,onKeyup:h,role:"menu",tabIndex:0,ref:t.itemsRef};return K({ourProps:g,theirProps:b,slot:c,attrs:n,slots:o,features:Y.RenderStrategy|Y.Static,visible:m.value,name:"MenuItems"})}}}),nn=O({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:n,attrs:o,expose:s}){var l;let r=(l=e.id)!=null?l:"headlessui-menu-item-".concat(ne()),t=W("MenuItem"),i=x(null);s({el:i,$el:i});let v=T(()=>t.activeItemIndex.value!==null?t.items.value[t.activeItemIndex.value].id===r:!1),h=Xt(i),p=T(()=>({disabled:e.disabled,get textValue(){return h()},domRef:i}));H(()=>t.registerItem(r,p)),ze(()=>t.unregisterItem(r)),U(()=>{t.menuState.value===0&&v.value&&t.activationTrigger.value!==0&&P(()=>{var d,E;return(E=(d=w(i))==null?void 0:d.scrollIntoView)==null?void 0:E.call(d,{block:"nearest"})})});function m(d){if(e.disabled)return d.preventDefault();t.closeMenu(),Se(w(t.buttonRef))}function a(){if(e.disabled)return t.goToItem(S.Nothing);t.goToItem(S.Specific,r)}let u=Bt();function c(d){u.update(d)}function b(d){u.wasMoved(d)&&(e.disabled||v.value||t.goToItem(S.Specific,r,0))}function g(d){u.wasMoved(d)&&(e.disabled||v.value&&t.goToItem(S.Nothing))}return()=>{let{disabled:d,...E}=e,M={active:v.value,disabled:d,close:t.closeMenu};return K({ourProps:{id:r,ref:i,role:"menuitem",tabIndex:d===!0?void 0:-1,"aria-disabled":d===!0?!0:void 0,onClick:m,onFocus:a,onPointerenter:c,onMouseenter:c,onPointermove:b,onMousemove:b,onPointerleave:g,onMouseleave:g},theirProps:{...o,...E},slot:M,attrs:o,slots:n,name:"MenuItem"})}}});const rn={class:"inline-flex w-full justify-center p-2"},on={class:"p-1"},ln=["onClick"],sn=O({__name:"OptionsComponents",props:Ve({options:{},setIcon:{},isLeftDir:{type:Boolean}},{currentOption:{required:!0},currentOptionModifiers:{}}),emits:["update:currentOption"],setup(e){const n=e,o=x(n.options[0].label),s="".concat(Math.max(...n.options.map(t=>t.label.length))*17,"px"),l=t=>{r.value=t.name,o.value=t.label},r=J(e,"currentOption");return(t,i)=>{const v=ee("Icon");return $(),N(_(en),{as:"div",class:"relative text-left text-sm font-semibold w-full h-full"},{default:D(()=>[t.setIcon?($(),N(_(ve),{key:0,class:"hover:cursor-pointer w-full h-full p-5"},{default:D(()=>[y(v,{icon:t.setIcon,class:"w-full h-full"},null,8,["icon"])]),_:1})):($(),N(_(ve),{key:1,class:"normal-button"},{default:D(()=>[f("div",rn,[f("p",{class:"text-right mr-2",style:Ke({width:s})},R(_(o)),5),y(v,{icon:"ic:sharp-keyboard-arrow-down",class:"w-5 h-5"})])]),_:1})),y(We,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:D(()=>[y(_(tn),{class:F(["absolute z-20  mt-2 w-56 border-stone-400 border bg-stone-100 shadow-lg ring-1 ring-black/5 focus:outline-none",t.isLeftDir?"origin-top-left left-0":"origin-top-right right-0"])},{default:D(()=>[f("div",on,[($(!0),k(C,null,ge(t.options,h=>($(),N(_(nn),{as:"template"},{default:D(({active:p})=>[f("button",{onClick:X(m=>l(h),["stop"]),class:F([p?h.activeColor:h.color,"flex w-full items-center px-2 py-2 max-sm:text-sm"])},R(h.label),11,ln)]),_:2},1024))),256))])]),_:1},8,["class"])]),_:1})]),_:1})}}}),an={class:"border-r border-l border-b border-stone-400"},un={class:"flex border-b border-stone-400 h-20 items-center"},cn={class:"ml-auto border-l border-dashed w-20 h-20 border-stone-400"},dn={class:"border-l border-dashed border-stone-400 w-20 h-20 flex justify-center items-center"},pn={class:"flex p-5"},mn={class:"flex mt-5 py-2 px-3"},fn=O({__name:"ArticleTempl",props:{propsArticleTempl:{}},setup(e){const n=e,o=T(()=>n.propsArticleTempl.history.map(u=>({label:u.tag,name:u.tag,...nt}))),s=n.propsArticleTempl.history.length,l=s>1?s-1:0,r=x(l),t=x(r.value.toString());xe(t,()=>{r.value=Number(t.value)-1,console.log(Number(t.value)-1)});const i=T(()=>{console.log(n.propsArticleTempl.history[r.value]);const a=n.propsArticleTempl.history[r.value].articleHtmlRef,u=n.propsArticleTempl.history[r.value].isDomainFormat;return{articleHtmlRef:a,isDomainFormat:u}}),v=x(""),h=T(()=>[Ie.REPORT]),p=T(()=>{var a;return(a=n.propsArticleTempl.analyze.rating)!=null?a:{}}),m=x({rated:n.propsArticleTempl.analyze.ratedLists||{nice:0,bad:0}});return(a,u)=>{const c=sn,b=$e,g=_t;return $(),k("div",an,[f("div",un,[f("span",cn,[y(c,{"set-icon":"ic:round-history",options:_(o),"current-option":_(t),"onUpdate:currentOption":u[0]||(u[0]=d=>j(t)?t.value=d:null)},null,8,["options","current-option"])]),f("span",dn,[y(c,{"set-icon":"ic:sharp-more-horiz",options:_(h),"current-option":_(v),"onUpdate:currentOption":u[1]||(u[1]=d=>j(v)?v.value=d:null)},null,8,["options","current-option"])])]),f("div",pn,[y(b,{propsArticleTempl:_(i)},null,8,["propsArticleTempl"])]),f("div",mn,[y(g,{ratingTable:_(p),models_rated:_(m),"onUpdate:models_rated":u[2]||(u[2]=d=>j(m)?m.value=d:null)},null,8,["ratingTable","models_rated"])])])}}}),vn={class:"relative [--imageIsEditor:var(--color-stone-400)]/50 block"},hn={class:"relative h-full flex gap-1"},bn={class:"p-1 h-10 w-10"},gn={ref:"DeleteButton",class:"DeleteButton w-full h-full rounded hover:cursor-pointer hover:bg-stone-500 hover:text-stone-100 flex items-center justify-center"},xn=O({__name:"Image",setup(e,{expose:n}){const o=x(),s=x(),l=x(),r=x(),t=x(),i=p=>p>=1024*1024?Math.round(p/(1024*1024))+"MB":p>=1024?Math.round(p/1024)+"KB":p+"B";return n({formatFileSize:i,initImage:()=>{var p,m,a,u,c;s.value.src="",(p=o.value)==null||p.classList.remove("isEditor"),(m=l.value)==null||m.classList.remove("flex"),(a=l.value)==null||a.classList.add("hidden"),(u=r.value)==null||u.classList.remove("isOverText"),(c=t.value)==null||c.classList.add("hidden")},settingImage:(p,m=0)=>{var a,u,c,b,g;s.value.src=p,m&&(r.value.textContent=i(m),(a=o.value)==null||a.classList.add("isEditor"),(u=l.value)==null||u.classList.remove("hidden"),(c=l.value)==null||c.classList.add("flex"),m>ie.FILESIZE&&((b=r.value)==null||b.classList.add("isOverText")),m>ie.FILESIZE&&((g=t.value)==null||g.classList.remove("hidden")))}}),(p,m)=>{const a=ee("Icon");return $(),k("div",vn,[f("div",{ref_key:"Pattern",ref:o,class:F(["p-2 imageBackground flex w-full h-full"])},[f("img",{ref_key:"Image",ref:s,src:"",class:"imageSource flex object-cover rounded-lg max-sm:min-h-[270px] sm:h-[400px]"},null,512)],512),f("div",{ref_key:"Meta",ref:l,class:"hidden metaDiv absolute top-2 right-2 z-10 items-center h-10 bg-stone-200 rounded"},[f("span",hn,[f("p",{ref_key:"FileSizeText",ref:r,class:F(["imageSizeText flex h-full items-center px-2"])},"0kb",512),f("div",{ref_key:"IsFileSizeOverEffect",ref:t,class:F(["absolute h-3 w-3 right-0 top-0 imageSizeEffect hidden"])},m[0]||(m[0]=[f("span",{class:"animate-ping absolute h-3 w-3 rounded-full bg-red-600 opacity-75"},null,-1),f("span",{class:"absolute h-3 w-3 rounded-full bg-red-600"},null,-1)]),512)]),f("div",bn,[f("button",gn,[y(a,{icon:"ic:outline-close",class:"w-full h-full p-1"})],512)])],512)])}}}),_n=_e(xn,[["__scopeId","data-v-f850bd22"]]),yn={class:"absolute -z-10"},wn={class:"[&>div]:xl:first:mt-[100px] [&>div]:md:first:mt-[80px] [&>div]:max-md:first:mt-[60px]"},Tn={key:0,class:"flex w-full justify-between bg-stone-100"},In={class:"md:flex max-md:hidden xl:w-[600px] md:w-[400px] flex-col"},$n={class:"sticky top-[100px]"},En={class:"text-stone-400 line-clamp-1 text-[0.8rem]"},Sn={class:"line-clamp-1"},kn={class:"text-[1.2rem]"},On={class:"line-clamp-1"},Mn={class:"line-clamp-1"},An={class:"flex flex-col xl:w-[calc(100%-600px)] md:w-[calc(100%-400px)] max-md:w-full"},Dn={class:"w-full xl:max-w-[654px] md:max-w-[550px] xl:min-h-[calc(100dvh-100px-(1.25rem*2))] md:min-h-[calc(100dvh-80px-(1rem*2))] max-md:min-h-[calc(100dvh-60px)]"},Fn={class:"mt-10 flex gap-3 select-none flex-wrap"},Pn={class:"flex"},Rn={class:"flex"},Ln={key:1,class:"bg-stone-100 h-dvh"},Kn=O({__name:"ArticlePage",setup(e){const n=he();Ge();const o=Je(),s=T(()=>n.article),l=x(),r=x([]),t=x("order");xe(t,()=>{rt(t.value,r.value)});const i=x(),v=async()=>{const g=ye(we,"articles",s.value),d=await Te(g);console.log(d.data()),l.value=d.data(),r.value=l.value.messages};H(()=>{v()});const h={index:"同領地",letsTalking:"開始聊",asking:"詢問",experience:"心得",feedback:"反饋意見"},p=T(()=>{var g,d,E,M;return n.topic=(d=(g=l.value)==null?void 0:g.alias)!=null?d:"letsTalking",(M=h[(E=l.value)==null?void 0:E.alias])!=null?M:"a1*3/3."}),m=T(()=>{var d,E,M,L;const g=l.value?((d=l.value)==null?void 0:d.history.length)-1:0;return console.log((E=l.value)==null?void 0:E.history[g].articleTitle),(L=(M=l.value)==null?void 0:M.history[g].articleTitle)!=null?L:"a1*3/3."}),a=()=>{var g;o.push("/"+((g=l.value)==null?void 0:g.alias))},u=x(),c=x(),b=g=>{var d,E;switch(g){case u.value.id:(d=u.value)==null||d.scrollIntoView();break;case c.value.id:(E=c.value)==null||E.scrollIntoView();break}};return(g,d)=>{const E=Qe,M=et,L=Ye,Fe=fn,Pe=pt,Re=Le;return $(),k(C,null,[y(E),f("div",yn,[q(y(_n,{ref_key:"imageFrameTempl",ref:i},null,512),[[Xe,!0]])]),f("div",wn,[_(l)?($(),k("div",Tn,[f("div",In,[f("div",$n,[y(L,{class:"pt-5 flex flex-col xl:min-h-[calc(100dvh-100px-(1.25rem*2))] md:min-h-[calc(100dvh-80px-(1rem*2))] max-md:min-h-[calc(100dvh-60px)]"},{default:D(()=>[f("p",En,[y(M,{text:"你處在"})]),f("p",Sn,[y(M,{text:_(p)},null,8,["text"])]),f("h2",kn,[f("p",On,R(_(m)),1)]),f("button",{onClick:a,class:"mt-10 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer line-clamp-1"},[f("p",Mn,R("回到*".concat(_(p),"*討論區")),1)]),f("button",{onClick:d[0]||(d[0]=A=>b("top")),class:"mt-3 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer"},d[5]||(d[5]=[f("p",{class:"line-clamp-1"},"最上方",-1)])),f("button",{onClick:d[1]||(d[1]=A=>b("msg")),class:"mt-3 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer"},d[6]||(d[6]=[f("p",{class:"line-clamp-1"},"留言區",-1)]))]),_:1})])]),f("div",An,[f("div",Dn,[f("div",{ref_key:"topElement",ref:u,id:"top",class:""},[y(Fe,{propsArticleTempl:_(l)},null,8,["propsArticleTempl"])],512),f("div",{ref_key:"msgElement",ref:c,id:"msg",class:"w-full"},[_(r)&&_(r).length>0?($(),k(C,{key:0},[f("div",Fn,[f("div",Pn,[q(f("input",{type:"radio",id:"order",name:"msg",value:"order","onUpdate:modelValue":d[2]||(d[2]=A=>j(t)?t.value=A:null),class:"hidden peer"},null,512),[[ae,_(t)]]),d[7]||(d[7]=f("label",{for:"order",class:"border-dashed border-2 border-transparent hover:border-stone-400 flex items-center cursor-pointer text-stone-400 peer-checked:bg-stone-400 peer-checked:text-white rounded-full xl:py-1 xl:px-4 xl:text-[1rem] md:py-1 md:px-3 md:text-[0.8rem] max-md:py-0.5 max-md:px-2 max-md:text-[0.75rem]"}," 按順序 ",-1))]),f("div",Rn,[q(f("input",{type:"radio",id:"newest",name:"msg",value:"newest","onUpdate:modelValue":d[3]||(d[3]=A=>j(t)?t.value=A:null),class:"hidden peer"},null,512),[[ae,_(t)]]),d[8]||(d[8]=f("label",{for:"newest",class:"border-dashed border-2 border-transparent hover:border-stone-400 cursor-pointer text-stone-400 peer-checked:bg-stone-400 peer-checked:text-white rounded-full xl:py-1 xl:px-4 xl:text-[1rem] md:py-1 md:px-3 md:text-[0.8rem] max-md:py-0.5 max-md:px-2 max-md:text-[0.75rem]"}," 最新 ",-1))])]),($(!0),k(C,null,ge(_(r),(A,Nn)=>($(),N(Pe,{key:A.time,propsMessageTempl:A},null,8,["propsMessageTempl"]))),128))],64)):qe("",!0),y(L,{class:"flex justify-center my-10"},{default:D(()=>[f("button",{class:"p-2 rounded border-2 border-dashed font-bold text-[1.2rem] text-stone-400 border-stone-400 select-none hover:text-stone-700 hover:border-stone-700 cursor-pointer",onClick:d[4]||(d[4]=A=>_(o).push("/posts"))},"來留個言吧！")]),_:1})],512)])])])):($(),k("div",Ln))]),y(Re)],64)}}});export{Kn as default};

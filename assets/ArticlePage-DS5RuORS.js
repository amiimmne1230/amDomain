import{_ as Pe}from"./SiteScroll.vue_vue_type_script_setup_true_lang-CYgxTf5P.js";import{_ as he,d as be,D as ge,g as xe,u as Re,a as Le,b as Ne,c as Ce}from"./NavigationTempl.vue_vue_type_script_setup_true_lang-Dl19Mz0p.js";import{d as A,u as _e,a as je,r as x,o as H,b as J,c as O,e as f,n as F,w as X,f as _,g as w,t as R,h as ee,i as S,j as T,k as Be,l as te,m as P,p as U,q as He,s as Ue,F as C,v as ye,x as ze,y as Ve,z as N,A as M,B as Ke,C as we,T as We,D as Ie,E as j,G as q,H as qe,I as ae,J as Ge,K as Je,L as Xe}from"./index-B_j_ehh_.js";import{g as Ze,E as Qe}from"./TipTap_Extensions-CK8p3wF2.js";import{O as Ye,a as et,A as ie}from"./Constant-BYt20L2w.js";import{s as tt}from"./useArticle-DFEnIsXU.js";const nt={};function rt(e,n){return null}const ot=he(nt,[["render",rt]]),lt={class:"flex gap-1"},st=["disabled"],at={class:"flex items-center p-1.5 rounded"},it={class:"mr-1"},ut=["disabled"],ct={class:"flex items-center p-1.5 rounded"},dt={class:"mr-1"},pt=A({__name:"RatingBarComponents",props:{ratingTable:{required:!0},ratingTableModifiers:{},rated:{},ratedModifiers:{}},emits:["update:ratingTable","update:rated"],setup(e){const n=_e(),o=je(),a=be(ge,"articles",n.article),l=x(),r=x(!1);H(async()=>{var p;const h=await xe(a);l.value=h.data().analyze,r.value=(p=l.value.ratedLists)==null?void 0:p.hasOwnProperty(o.name),console.log(r)});const t=async h=>{var s,u,c,b;if(!l.value)return;i.value.nice+=(s=h.nice)!=null?s:0,i.value.bad+=(u=h.bad)!=null?u:0,r.value=!0,v.value={nice:(c=h.nice)!=null?c:0,bad:(b=h.bad)!=null?b:0};const p=l.value.rating.nice+v.value.nice,m=l.value.rating.bad+v.value.bad;await Re(a,{analyze:{rating:{nice:p,bad:m},ratedLists:{[o.name]:h}}},{merge:!0})},i=J(e,"ratingTable"),v=J(e,"rated");return(h,p)=>{const m=ee("Icon");return S(),O("div",lt,[f("button",{disabled:_(r),onClick:p[0]||(p[0]=X(s=>t({nice:1}),["stop"])),class:F(["normal-button disabled:select-none disabled:text-stone-500/70",[{"select-none text-stone-500/70":v.value}]])},[f("div",at,[f("p",it,R(i.value.nice),1),w(m,{icon:"ic:sharp-thumb-up-alt",class:"w-5 h-5"})])],10,st),f("button",{disabled:_(r),onClick:p[1]||(p[1]=X(s=>t({bad:1}),["stop"])),class:F(["normal-button disabled:select-none disabled:text-stone-500/70",[{"select-none text-stone-500/70":v.value}]])},[f("div",ct,[f("p",dt,R(i.value.bad),1),w(m,{icon:"ic:sharp-thumb-down-alt",class:"w-5 h-5"})])],10,ut)])}}}),mt=["innerHTML"],ft='\n    {\n        "type":"doc",\n        "content":[{\n            "type":"paragraph",\n            "content":[{\n                "type":"text",\n                "text":" "\n            }]\n        }]\n    }\n',vt=A({__name:"DArticle",props:{propsArticleTempl:{}},setup(e){const n=e,o=x("");H(()=>{const l=JSON.parse(n.propsArticleTempl.articleHtmlRef);o.value=Ze(l!=null?l:ft,Qe)});const a=T(()=>{var r;return(r=n.propsArticleTempl)==null?void 0:r.isDomainFormat});return(l,r)=>(S(),O("article",{innerHTML:_(o),class:F([{"amDomain-format":_(a)}])},null,10,mt))}});var ue;let ht=Symbol("headlessui.useid"),bt=0;const ne=(ue=Be)!=null?ue:function(){return te(ht,()=>"".concat(++bt))()};function y(e){var n;if(e==null||e.value==null)return null;let o=(n=e.value.$el)!=null?n:e.value;return o instanceof Node?o:null}function V(e,n,...o){if(e in n){let l=n[e];return typeof l=="function"?l(...o):l}let a=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(n).map(l=>'"'.concat(l,'"')).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(a,V),a}var gt=Object.defineProperty,xt=(e,n,o)=>n in e?gt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o,ce=(e,n,o)=>(xt(e,typeof n!="symbol"?n+"":n,o),o);let _t=class{constructor(){ce(this,"current",this.detect()),ce(this,"currentId",0)}set(n){this.current!==n&&(this.currentId=0,this.current=n)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},re=new _t;function oe(e){if(re.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let n=y(e);if(n)return n.ownerDocument}return document}let Z=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>"".concat(e,":not([tabindex='-1'])")).join(",");var Q=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(Q||{}),yt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(yt||{}),wt=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(wt||{});function Te(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Z)).sort((n,o)=>Math.sign((n.tabIndex||Number.MAX_SAFE_INTEGER)-(o.tabIndex||Number.MAX_SAFE_INTEGER)))}var le=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(le||{});function se(e,n=0){var o;return e===((o=oe(e))==null?void 0:o.body)?!1:V(n,{0(){return e.matches(Z)},1(){let a=e;for(;a!==null;){if(a.matches(Z))return!0;a=a.parentElement}return!1}})}function Ee(e){let n=oe(e);P(()=>{n&&!se(n.activeElement,0)&&Tt(e)})}var It=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(It||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Tt(e){e==null||e.focus({preventScroll:!0})}let Et=["textarea","input"].join(",");function St(e){var n,o;return(o=(n=e==null?void 0:e.matches)==null?void 0:n.call(e,Et))!=null?o:!1}function Se(e,n=o=>o){return e.slice().sort((o,a)=>{let l=n(o),r=n(a);if(l===null||r===null)return 0;let t=l.compareDocumentPosition(r);return t&Node.DOCUMENT_POSITION_FOLLOWING?-1:t&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function $t(e,n){return kt(Te(),n,{relativeTo:e})}function kt(e,n,{sorted:o=!0,relativeTo:a=null,skipElements:l=[]}={}){var r;let t=(r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e==null?void 0:e.ownerDocument)!=null?r:document,i=Array.isArray(e)?o?Se(e):e:Te(e);l.length>0&&i.length>1&&(i=i.filter(c=>!l.includes(c))),a=a!=null?a:t.activeElement;let v=(()=>{if(n&5)return 1;if(n&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),h=(()=>{if(n&1)return 0;if(n&2)return Math.max(0,i.indexOf(a))-1;if(n&4)return Math.max(0,i.indexOf(a))+1;if(n&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=n&32?{preventScroll:!0}:{},m=0,s=i.length,u;do{if(m>=s||m+s<=0)return 0;let c=h+m;if(n&16)c=(c+s)%s;else{if(c<0)return 3;if(c>=s)return 1}u=i[c],u==null||u.focus(p),m+=v}while(u!==t.activeElement);return n&6&&St(u)&&u.select(),2}function Ot(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function At(){return/Android/gi.test(window.navigator.userAgent)}function Dt(){return Ot()||At()}function z(e,n,o){re.isServer||U(a=>{document.addEventListener(e,n,o),a(()=>document.removeEventListener(e,n,o))})}function Mt(e,n,o){re.isServer||U(a=>{window.addEventListener(e,n,o),a(()=>window.removeEventListener(e,n,o))})}function Ft(e,n,o=T(()=>!0)){function a(r,t){if(!o.value||r.defaultPrevented)return;let i=t(r);if(i===null||!i.getRootNode().contains(i))return;let v=function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e);for(let h of v){if(h===null)continue;let p=h instanceof HTMLElement?h:y(h);if(p!=null&&p.contains(i)||r.composed&&r.composedPath().includes(p))return}return!se(i,le.Loose)&&i.tabIndex!==-1&&r.preventDefault(),n(r,i)}let l=x(null);z("pointerdown",r=>{var t,i;o.value&&(l.value=((i=(t=r.composedPath)==null?void 0:t.call(r))==null?void 0:i[0])||r.target)},!0),z("mousedown",r=>{var t,i;o.value&&(l.value=((i=(t=r.composedPath)==null?void 0:t.call(r))==null?void 0:i[0])||r.target)},!0),z("click",r=>{Dt()||l.value&&(a(r,()=>l.value),l.value=null)},!0),z("touchend",r=>a(r,()=>r.target instanceof HTMLElement?r.target:null),!0),Mt("blur",r=>a(r,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function de(e,n){if(e)return e;let o=n!=null?n:"button";if(typeof o=="string"&&o.toLowerCase()==="button")return"button"}function Pt(e,n){let o=x(de(e.value.type,e.value.as));return H(()=>{o.value=de(e.value.type,e.value.as)}),U(()=>{var a;o.value||y(n)&&y(n)instanceof HTMLButtonElement&&!((a=y(n))!=null&&a.hasAttribute("type"))&&(o.value="button")}),o}function pe(e){return[e.screenX,e.screenY]}function Rt(){let e=x([-1,-1]);return{wasMoved(n){let o=pe(n);return e.value[0]===o[0]&&e.value[1]===o[1]?!1:(e.value=o,!0)},update(n){e.value=pe(n)}}}function Lt({container:e,accept:n,walk:o,enabled:a}){U(()=>{let l=e.value;if(!l||a!==void 0&&!a.value)return;let r=oe(e);if(!r)return;let t=Object.assign(v=>n(v),{acceptNode:n}),i=r.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,t,!1);for(;i.nextNode();)o(i.currentNode)})}var Y=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Y||{}),Nt=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(Nt||{});function K({visible:e=!0,features:n=0,ourProps:o,theirProps:a,...l}){var r;let t=ke(a,o),i=Object.assign(l,{props:t});if(e||n&2&&t.static)return G(i);if(n&1){let v=(r=t.unmount)==null||r?0:1;return V(v,{0(){return null},1(){return G({...l,props:{...t,hidden:!0,style:{display:"none"}}})}})}return G(i)}function G({props:e,attrs:n,slots:o,slot:a,name:l}){var r,t;let{as:i,...v}=Ct(e,["unmount","static"]),h=(r=o.default)==null?void 0:r.call(o,a),p={};if(a){let m=!1,s=[];for(let[u,c]of Object.entries(a))typeof c=="boolean"&&(m=!0),c===!0&&s.push(u);m&&(p["data-headlessui-state"]=s.join(" "))}if(i==="template"){if(h=$e(h!=null?h:[]),Object.keys(v).length>0||Object.keys(n).length>0){let[m,...s]=h!=null?h:[];if(!jt(m)||s.length>0)throw new Error(['Passing props on "template"!',"","The current component <".concat(l,' /> is rendering a "template".'),"However we need to passthrough the following props:",Object.keys(v).concat(Object.keys(n)).map(b=>b.trim()).filter((b,g,d)=>d.indexOf(b)===g).sort((b,g)=>b.localeCompare(g)).map(b=>"  - ".concat(b)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(b=>"  - ".concat(b)).join("\n")].join("\n"));let u=ke((t=m.props)!=null?t:{},v,p),c=He(m,u,!0);for(let b in u)b.startsWith("on")&&(c.props||(c.props={}),c.props[b]=u[b]);return c}return Array.isArray(h)&&h.length===1?h[0]:h}return Ue(i,Object.assign({},v,p),{default:()=>h})}function $e(e){return e.flatMap(n=>n.type===C?$e(n.children):[n])}function ke(...e){if(e.length===0)return{};if(e.length===1)return e[0];let n={},o={};for(let a of e)for(let l in a)l.startsWith("on")&&typeof a[l]=="function"?(o[l]!=null||(o[l]=[]),o[l].push(a[l])):n[l]=a[l];if(n.disabled||n["aria-disabled"])return Object.assign(n,Object.fromEntries(Object.keys(o).map(a=>[a,void 0])));for(let a in o)Object.assign(n,{[a](l,...r){let t=o[a];for(let i of t){if(l instanceof Event&&l.defaultPrevented)return;i(l,...r)}}});return n}function Ct(e,n=[]){let o=Object.assign({},e);for(let a of n)a in o&&delete o[a];return o}function jt(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}let Oe=Symbol("Context");var B=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(B||{});function Bt(){return te(Oe,null)}function Ht(e){ye(Oe,e)}var I=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(I||{});function Ut(e){throw new Error("Unexpected object: "+e)}var $=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))($||{});function zt(e,n){let o=n.resolveItems();if(o.length<=0)return null;let a=n.resolveActiveIndex(),l=a!=null?a:-1;switch(e.focus){case 0:{for(let r=0;r<o.length;++r)if(!n.resolveDisabled(o[r],r,o))return r;return a}case 1:{l===-1&&(l=o.length);for(let r=l-1;r>=0;--r)if(!n.resolveDisabled(o[r],r,o))return r;return a}case 2:{for(let r=l+1;r<o.length;++r)if(!n.resolveDisabled(o[r],r,o))return r;return a}case 3:{for(let r=o.length-1;r>=0;--r)if(!n.resolveDisabled(o[r],r,o))return r;return a}case 4:{for(let r=0;r<o.length;++r)if(n.resolveId(o[r],r,o)===e.id)return r;return a}case 5:return null;default:Ut(e)}}let me=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function fe(e){var n,o;let a=(n=e.innerText)!=null?n:"",l=e.cloneNode(!0);if(!(l instanceof HTMLElement))return a;let r=!1;for(let i of l.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))i.remove(),r=!0;let t=r?(o=l.innerText)!=null?o:"":a;return me.test(t)&&(t=t.replace(me,"")),t}function Vt(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let o=e.getAttribute("aria-labelledby");if(o){let a=o.split(" ").map(l=>{let r=document.getElementById(l);if(r){let t=r.getAttribute("aria-label");return typeof t=="string"?t.trim():fe(r).trim()}return null}).filter(Boolean);if(a.length>0)return a.join(", ")}return fe(e).trim()}function Kt(e){let n=x(""),o=x("");return()=>{let a=y(e);if(!a)return"";let l=a.innerText;if(n.value===l)return o.value;let r=Vt(a).trim().toLowerCase();return n.value=l,o.value=r,r}}var Wt=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Wt||{}),qt=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(qt||{});function Gt(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let Ae=Symbol("MenuContext");function W(e){let n=te(Ae,null);if(n===null){let o=new Error("<".concat(e," /> is missing a parent <Menu /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(o,W),o}return n}let Jt=A({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:n,attrs:o}){let a=x(1),l=x(null),r=x(null),t=x([]),i=x(""),v=x(null),h=x(1);function p(s=u=>u){let u=v.value!==null?t.value[v.value]:null,c=Se(s(t.value.slice()),g=>y(g.dataRef.domRef)),b=u?c.indexOf(u):null;return b===-1&&(b=null),{items:c,activeItemIndex:b}}let m={menuState:a,buttonRef:l,itemsRef:r,items:t,searchQuery:i,activeItemIndex:v,activationTrigger:h,closeMenu:()=>{a.value=1,v.value=null},openMenu:()=>a.value=0,goToItem(s,u,c){let b=p(),g=zt(s===$.Specific?{focus:$.Specific,id:u}:{focus:s},{resolveItems:()=>b.items,resolveActiveIndex:()=>b.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.disabled});i.value="",v.value=g,h.value=c!=null?c:1,t.value=b.items},search(s){let u=i.value!==""?0:1;i.value+=s.toLowerCase();let c=(v.value!==null?t.value.slice(v.value+u).concat(t.value.slice(0,v.value+u)):t.value).find(g=>g.dataRef.textValue.startsWith(i.value)&&!g.dataRef.disabled),b=c?t.value.indexOf(c):-1;b===-1||b===v.value||(v.value=b,h.value=1)},clearSearch(){i.value=""},registerItem(s,u){let c=p(b=>[...b,{id:s,dataRef:u}]);t.value=c.items,v.value=c.activeItemIndex,h.value=1},unregisterItem(s){let u=p(c=>{let b=c.findIndex(g=>g.id===s);return b!==-1&&c.splice(b,1),c});t.value=u.items,v.value=u.activeItemIndex,h.value=1}};return Ft([l,r],(s,u)=>{var c;m.closeMenu(),se(u,le.Loose)||(s.preventDefault(),(c=y(l))==null||c.focus())},T(()=>a.value===0)),ye(Ae,m),Ht(T(()=>V(a.value,{0:B.Open,1:B.Closed}))),()=>{let s={open:a.value===0,close:m.closeMenu};return K({ourProps:{},theirProps:e,slot:s,slots:n,attrs:o,name:"Menu"})}}}),ve=A({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:n,slots:o,expose:a}){var l;let r=(l=e.id)!=null?l:"headlessui-menu-button-".concat(ne()),t=W("MenuButton");a({el:t.buttonRef,$el:t.buttonRef});function i(m){switch(m.key){case I.Space:case I.Enter:case I.ArrowDown:m.preventDefault(),m.stopPropagation(),t.openMenu(),P(()=>{var s;(s=y(t.itemsRef))==null||s.focus({preventScroll:!0}),t.goToItem($.First)});break;case I.ArrowUp:m.preventDefault(),m.stopPropagation(),t.openMenu(),P(()=>{var s;(s=y(t.itemsRef))==null||s.focus({preventScroll:!0}),t.goToItem($.Last)});break}}function v(m){switch(m.key){case I.Space:m.preventDefault();break}}function h(m){e.disabled||(t.menuState.value===0?(t.closeMenu(),P(()=>{var s;return(s=y(t.buttonRef))==null?void 0:s.focus({preventScroll:!0})})):(m.preventDefault(),t.openMenu(),Gt(()=>{var s;return(s=y(t.itemsRef))==null?void 0:s.focus({preventScroll:!0})})))}let p=Pt(T(()=>({as:e.as,type:n.type})),t.buttonRef);return()=>{var m;let s={open:t.menuState.value===0},{...u}=e,c={ref:t.buttonRef,id:r,type:p.value,"aria-haspopup":"menu","aria-controls":(m=y(t.itemsRef))==null?void 0:m.id,"aria-expanded":t.menuState.value===0,onKeydown:i,onKeyup:v,onClick:h};return K({ourProps:c,theirProps:u,slot:s,attrs:n,slots:o,name:"MenuButton"})}}}),Xt=A({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:n,slots:o,expose:a}){var l;let r=(l=e.id)!=null?l:"headlessui-menu-items-".concat(ne()),t=W("MenuItems"),i=x(null);a({el:t.itemsRef,$el:t.itemsRef}),Lt({container:T(()=>y(t.itemsRef)),enabled:T(()=>t.menuState.value===0),accept(s){return s.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:s.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(s){s.setAttribute("role","none")}});function v(s){var u;switch(i.value&&clearTimeout(i.value),s.key){case I.Space:if(t.searchQuery.value!=="")return s.preventDefault(),s.stopPropagation(),t.search(s.key);case I.Enter:if(s.preventDefault(),s.stopPropagation(),t.activeItemIndex.value!==null){let c=t.items.value[t.activeItemIndex.value];(u=y(c.dataRef.domRef))==null||u.click()}t.closeMenu(),Ee(y(t.buttonRef));break;case I.ArrowDown:return s.preventDefault(),s.stopPropagation(),t.goToItem($.Next);case I.ArrowUp:return s.preventDefault(),s.stopPropagation(),t.goToItem($.Previous);case I.Home:case I.PageUp:return s.preventDefault(),s.stopPropagation(),t.goToItem($.First);case I.End:case I.PageDown:return s.preventDefault(),s.stopPropagation(),t.goToItem($.Last);case I.Escape:s.preventDefault(),s.stopPropagation(),t.closeMenu(),P(()=>{var c;return(c=y(t.buttonRef))==null?void 0:c.focus({preventScroll:!0})});break;case I.Tab:s.preventDefault(),s.stopPropagation(),t.closeMenu(),P(()=>$t(y(t.buttonRef),s.shiftKey?Q.Previous:Q.Next));break;default:s.key.length===1&&(t.search(s.key),i.value=setTimeout(()=>t.clearSearch(),350));break}}function h(s){switch(s.key){case I.Space:s.preventDefault();break}}let p=Bt(),m=T(()=>p!==null?(p.value&B.Open)===B.Open:t.menuState.value===0);return()=>{var s,u;let c={open:t.menuState.value===0},{...b}=e,g={"aria-activedescendant":t.activeItemIndex.value===null||(s=t.items.value[t.activeItemIndex.value])==null?void 0:s.id,"aria-labelledby":(u=y(t.buttonRef))==null?void 0:u.id,id:r,onKeydown:v,onKeyup:h,role:"menu",tabIndex:0,ref:t.itemsRef};return K({ourProps:g,theirProps:b,slot:c,attrs:n,slots:o,features:Y.RenderStrategy|Y.Static,visible:m.value,name:"MenuItems"})}}}),Zt=A({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:n,attrs:o,expose:a}){var l;let r=(l=e.id)!=null?l:"headlessui-menu-item-".concat(ne()),t=W("MenuItem"),i=x(null);a({el:i,$el:i});let v=T(()=>t.activeItemIndex.value!==null?t.items.value[t.activeItemIndex.value].id===r:!1),h=Kt(i),p=T(()=>({disabled:e.disabled,get textValue(){return h()},domRef:i}));H(()=>t.registerItem(r,p)),ze(()=>t.unregisterItem(r)),U(()=>{t.menuState.value===0&&v.value&&t.activationTrigger.value!==0&&P(()=>{var d,E;return(E=(d=y(i))==null?void 0:d.scrollIntoView)==null?void 0:E.call(d,{block:"nearest"})})});function m(d){if(e.disabled)return d.preventDefault();t.closeMenu(),Ee(y(t.buttonRef))}function s(){if(e.disabled)return t.goToItem($.Nothing);t.goToItem($.Specific,r)}let u=Rt();function c(d){u.update(d)}function b(d){u.wasMoved(d)&&(e.disabled||v.value||t.goToItem($.Specific,r,0))}function g(d){u.wasMoved(d)&&(e.disabled||v.value&&t.goToItem($.Nothing))}return()=>{let{disabled:d,...E}=e,k={active:v.value,disabled:d,close:t.closeMenu};return K({ourProps:{id:r,ref:i,role:"menuitem",tabIndex:d===!0?void 0:-1,"aria-disabled":d===!0?!0:void 0,onClick:m,onFocus:s,onPointerenter:c,onMouseenter:c,onPointermove:b,onMousemove:b,onPointerleave:g,onMouseleave:g},theirProps:{...o,...E},slot:k,attrs:o,slots:n,name:"MenuItem"})}}});const Qt={class:"inline-flex w-full justify-center p-2"},Yt={class:"p-1"},en=["onClick"],tn=A({__name:"OptionsComponents",props:Ve({options:{},setIcon:{},isLeftDir:{type:Boolean}},{currentOption:{required:!0},currentOptionModifiers:{}}),emits:["update:currentOption"],setup(e){const n=e,o=x(n.options[0].label),a="".concat(Math.max(...n.options.map(t=>t.label.length))*17,"px"),l=t=>{r.value=t.name,o.value=t.label},r=J(e,"currentOption");return(t,i)=>{const v=ee("Icon");return S(),N(_(Jt),{as:"div",class:"relative text-left text-sm font-semibold w-full h-full"},{default:M(()=>[t.setIcon?(S(),N(_(ve),{key:0,class:"hover:cursor-pointer w-full h-full p-5"},{default:M(()=>[w(v,{icon:t.setIcon,class:"w-full h-full"},null,8,["icon"])]),_:1})):(S(),N(_(ve),{key:1,class:"normal-button"},{default:M(()=>[f("div",Qt,[f("p",{class:"text-right mr-2",style:Ke({width:a})},R(_(o)),5),w(v,{icon:"ic:sharp-keyboard-arrow-down",class:"w-5 h-5"})])]),_:1})),w(We,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:M(()=>[w(_(Xt),{class:F(["absolute z-20  mt-2 w-56 border-stone-400 border bg-stone-100 shadow-lg ring-1 ring-black/5 focus:outline-none",t.isLeftDir?"origin-top-left left-0":"origin-top-right right-0"])},{default:M(()=>[f("div",Yt,[(S(!0),O(C,null,we(t.options,h=>(S(),N(_(Zt),{as:"template"},{default:M(({active:p})=>[f("button",{onClick:X(m=>l(h),["stop"]),class:F([p?h.activeColor:h.color,"flex w-full items-center px-2 py-2 max-sm:text-sm"])},R(h.label),11,en)]),_:2},1024))),256))])]),_:1},8,["class"])]),_:1})]),_:1})}}}),nn={class:"border-r border-l border-b border-stone-400"},rn={class:"flex border-b border-stone-400 h-20 items-center"},on={class:"ml-auto border-l border-dashed w-20 h-20 border-stone-400"},ln={class:"border-l border-dashed border-stone-400 w-20 h-20 flex justify-center items-center"},sn={class:"flex p-5"},an={class:"flex mt-5 py-2 px-3"},un=A({__name:"ArticleTempl",props:{propsArticleTempl:{}},setup(e){const n=e,o=T(()=>n.propsArticleTempl.history.map(u=>({label:u.tag,name:u.tag,...Ye}))),a=n.propsArticleTempl.history.length,l=a>1?a-1:0,r=x(l),t=x(r.value.toString());Ie(t,()=>{r.value=Number(t.value)-1,console.log(Number(t.value)-1)});const i=T(()=>{console.log(n.propsArticleTempl.history[r.value]);const s=n.propsArticleTempl.history[r.value].articleHtmlRef,u=n.propsArticleTempl.history[r.value].isDomainFormat;return{articleHtmlRef:s,isDomainFormat:u}}),v=x(""),h=T(()=>[et.REPORT]),p=T(()=>{var s;return(s=n.propsArticleTempl.analyze.rating)!=null?s:{}}),m=x({rated:n.propsArticleTempl.analyze.ratedLists||{nice:0,bad:0}});return(s,u)=>{const c=tn,b=vt,g=pt;return S(),O("div",nn,[f("div",rn,[f("span",on,[w(c,{"set-icon":"ic:round-history",options:_(o),"current-option":_(t),"onUpdate:currentOption":u[0]||(u[0]=d=>j(t)?t.value=d:null)},null,8,["options","current-option"])]),f("span",ln,[w(c,{"set-icon":"ic:sharp-more-horiz",options:_(h),"current-option":_(v),"onUpdate:currentOption":u[1]||(u[1]=d=>j(v)?v.value=d:null)},null,8,["options","current-option"])])]),f("div",sn,[w(b,{propsArticleTempl:_(i)},null,8,["propsArticleTempl"])]),f("div",an,[w(g,{ratingTable:_(p),models_rated:_(m),"onUpdate:models_rated":u[2]||(u[2]=d=>j(m)?m.value=d:null)},null,8,["ratingTable","models_rated"])])])}}}),cn={class:"relative [--imageIsEditor:var(--color-stone-400)]/50 block"},dn={class:"relative h-full flex gap-1"},pn={class:"p-1 h-10 w-10"},mn={ref:"DeleteButton",class:"DeleteButton w-full h-full rounded hover:cursor-pointer hover:bg-stone-500 hover:text-stone-100 flex items-center justify-center"},fn=A({__name:"Image",setup(e,{expose:n}){const o=x(),a=x(),l=x(),r=x(),t=x(),i=p=>p>=1024*1024?Math.round(p/(1024*1024))+"MB":p>=1024?Math.round(p/1024)+"KB":p+"B";return n({formatFileSize:i,initImage:()=>{var p,m,s,u,c;a.value.src="",(p=o.value)==null||p.classList.remove("isEditor"),(m=l.value)==null||m.classList.remove("flex"),(s=l.value)==null||s.classList.add("hidden"),(u=r.value)==null||u.classList.remove("isOverText"),(c=t.value)==null||c.classList.add("hidden")},settingImage:(p,m=0)=>{var s,u,c,b,g;a.value.src=p,m&&(r.value.textContent=i(m),(s=o.value)==null||s.classList.add("isEditor"),(u=l.value)==null||u.classList.remove("hidden"),(c=l.value)==null||c.classList.add("flex"),m>ie.FILESIZE&&((b=r.value)==null||b.classList.add("isOverText")),m>ie.FILESIZE&&((g=t.value)==null||g.classList.remove("hidden")))}}),(p,m)=>{const s=ee("Icon");return S(),O("div",cn,[f("div",{ref_key:"Pattern",ref:o,class:F(["p-2 imageBackground flex w-full h-full"])},[f("img",{ref_key:"Image",ref:a,src:"",class:"imageSource flex object-cover rounded-lg max-sm:min-h-[270px] sm:h-[400px]"},null,512)],512),f("div",{ref_key:"Meta",ref:l,class:"hidden metaDiv absolute top-2 right-2 z-10 items-center h-10 bg-stone-200 rounded"},[f("span",dn,[f("p",{ref_key:"FileSizeText",ref:r,class:F(["imageSizeText flex h-full items-center px-2"])},"0kb",512),f("div",{ref_key:"IsFileSizeOverEffect",ref:t,class:F(["absolute h-3 w-3 right-0 top-0 imageSizeEffect hidden"])},m[0]||(m[0]=[f("span",{class:"animate-ping absolute h-3 w-3 rounded-full bg-red-600 opacity-75"},null,-1),f("span",{class:"absolute h-3 w-3 rounded-full bg-red-600"},null,-1)]),512)]),f("div",pn,[f("button",mn,[w(s,{icon:"ic:outline-close",class:"w-full h-full p-1"})],512)])],512)])}}}),vn=he(fn,[["__scopeId","data-v-f850bd22"]]),hn={class:"absolute -z-10"},bn={class:"[&>div]:xl:first:mt-[100px] [&>div]:md:first:mt-[80px] [&>div]:max-md:first:mt-[60px]"},gn={key:0,class:"flex w-full justify-between bg-stone-100"},xn={class:"md:flex max-md:hidden xl:w-[600px] md:w-[400px] flex-col"},_n={class:"sticky top-[100px]"},yn={class:"text-stone-400 line-clamp-1 text-[0.8rem]"},wn={class:"line-clamp-1"},In={class:"text-[1.2rem]"},Tn={class:"line-clamp-1"},En={class:"line-clamp-1"},Sn={class:"flex flex-col xl:w-[calc(100%-600px)] md:w-[calc(100%-400px)] max-md:w-full"},$n={class:"w-full xl:max-w-[654px] md:max-w-[550px] xl:min-h-[calc(100dvh-100px-(1.25rem*2))] md:min-h-[calc(100dvh-80px-(1rem*2))] max-md:min-h-[calc(100dvh-60px)]"},kn={class:"mt-10 flex gap-3 select-none flex-wrap"},On={class:"flex"},An={class:"flex"},Dn={key:1,class:"bg-stone-100 h-dvh"},Bn=A({__name:"ArticlePage",setup(e){const n=_e();Ge();const o=Je(),a=T(()=>n.article),l=x(),r=x([]),t=x("order");Ie(t,()=>{tt(t.value,r.value)});const i=x(),v=async()=>{const g=be(ge,"articles",a.value),d=await xe(g);console.log(d.data()),l.value=d.data(),r.value=l.value.messages};H(()=>{v()});const h={index:"同領地",letsTalking:"開始聊",asking:"詢問",experience:"心得",feedback:"反饋意見"},p=T(()=>{var g,d,E,k;return n.topic=(d=(g=l.value)==null?void 0:g.alias)!=null?d:"letsTalking",(k=h[(E=l.value)==null?void 0:E.alias])!=null?k:"a1*3/3."}),m=T(()=>{var d,E,k,L;const g=l.value?((d=l.value)==null?void 0:d.history.length)-1:0;return console.log((E=l.value)==null?void 0:E.history[g].articleTitle),(L=(k=l.value)==null?void 0:k.history[g].articleTitle)!=null?L:"a1*3/3."}),s=()=>{var g;o.push("/"+((g=l.value)==null?void 0:g.alias))},u=x(),c=x(),b=g=>{var d,E;switch(g){case u.value.id:(d=u.value)==null||d.scrollIntoView();break;case c.value.id:(E=c.value)==null||E.scrollIntoView();break}};return(g,d)=>{const E=Le,k=Ce,L=Ne,De=un,Me=ot,Fe=Pe;return S(),O(C,null,[w(E),f("div",hn,[q(w(vn,{ref_key:"imageFrameTempl",ref:i},null,512),[[Xe,!0]])]),f("div",bn,[_(l)?(S(),O("div",gn,[f("div",xn,[f("div",_n,[w(L,{class:"pt-5 flex flex-col xl:min-h-[calc(100dvh-100px-(1.25rem*2))] md:min-h-[calc(100dvh-80px-(1rem*2))] max-md:min-h-[calc(100dvh-60px)]"},{default:M(()=>[f("p",yn,[w(k,{text:"你處在"})]),f("p",wn,[w(k,{text:_(p)},null,8,["text"])]),f("h2",In,[f("p",Tn,R(_(m)),1)]),f("button",{onClick:s,class:"mt-10 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer line-clamp-1"},[f("p",En,R("回到*".concat(_(p),"*討論區")),1)]),f("button",{onClick:d[0]||(d[0]=D=>b("top")),class:"mt-3 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer"},d[5]||(d[5]=[f("p",{class:"line-clamp-1"},"最上方",-1)])),f("button",{onClick:d[1]||(d[1]=D=>b("msg")),class:"mt-3 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer"},d[6]||(d[6]=[f("p",{class:"line-clamp-1"},"留言區",-1)]))]),_:1})])]),f("div",Sn,[f("div",$n,[f("div",{ref_key:"topElement",ref:u,id:"top",class:""},[w(De,{propsArticleTempl:_(l)},null,8,["propsArticleTempl"])],512),f("div",{ref_key:"msgElement",ref:c,id:"msg",class:"w-full"},[_(r)&&_(r).length>0?(S(),O(C,{key:0},[f("div",kn,[f("div",On,[q(f("input",{type:"radio",id:"order",name:"msg",value:"order","onUpdate:modelValue":d[2]||(d[2]=D=>j(t)?t.value=D:null),class:"hidden peer"},null,512),[[ae,_(t)]]),d[7]||(d[7]=f("label",{for:"order",class:"border-dashed border-2 border-transparent hover:border-stone-400 flex items-center cursor-pointer text-stone-400 peer-checked:bg-stone-400 peer-checked:text-white rounded-full xl:py-1 xl:px-4 xl:text-[1rem] md:py-1 md:px-3 md:text-[0.8rem] max-md:py-0.5 max-md:px-2 max-md:text-[0.75rem]"}," 按順序 ",-1))]),f("div",An,[q(f("input",{type:"radio",id:"newest",name:"msg",value:"newest","onUpdate:modelValue":d[3]||(d[3]=D=>j(t)?t.value=D:null),class:"hidden peer"},null,512),[[ae,_(t)]]),d[8]||(d[8]=f("label",{for:"newest",class:"border-dashed border-2 border-transparent hover:border-stone-400 cursor-pointer text-stone-400 peer-checked:bg-stone-400 peer-checked:text-white rounded-full xl:py-1 xl:px-4 xl:text-[1rem] md:py-1 md:px-3 md:text-[0.8rem] max-md:py-0.5 max-md:px-2 max-md:text-[0.75rem]"}," 最新 ",-1))])]),(S(!0),O(C,null,we(_(r),(D,Mn)=>(S(),N(Me,{key:D.time,propsMessageTempl:D},null,8,["propsMessageTempl"]))),128))],64)):qe("",!0),w(L,{class:"flex justify-center my-10"},{default:M(()=>[f("button",{class:"p-2 rounded border-2 border-dashed font-bold text-[1.2rem] text-stone-400 border-stone-400 select-none hover:text-stone-700 hover:border-stone-700 cursor-pointer",onClick:d[4]||(d[4]=D=>_(o).push("/posts"))},"來留個言吧！")]),_:1})],512)])])])):(S(),O("div",Dn))]),w(Fe)],64)}}});export{Bn as default};

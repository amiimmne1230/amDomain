System.register(["./SiteScroll.vue_vue_type_script_setup_true_lang-legacy-5An3yYlv.js","./TipTap_Extensions-legacy-BfV7uWzB.js","./index-legacy-BHM_CA9V.js","./NavigationTempl.vue_vue_type_script_setup_true_lang-legacy-7k8f8T2m.js","./DomainTime.vue_vue_type_script_setup_true_lang-legacy-Cf0zobx5.js","./useArticle-legacy-Bw9ES3UN.js"],(function(e,t){"use strict";var r,l,n,a,o,s,i,u,c,d,p,m,f,v,h,b,g,x,w,y,T,I,E,k,S,M,_,A,D,P,O,F,L,R,N,j,C,B,H,U,$,z,K,V,q,W,G,J,X,Q,Y,Z,ee,te,re;return{setters:[e=>{r=e._},e=>{l=e.g,n=e.E},e=>{a=e.d,o=e.r,s=e.o,i=e.c,u=e.a,c=e.n,d=e.u,p=e.b,m=e.e,f=e.t,v=e.f,h=e.g,b=e.h,g=e.i,x=e.w,w=e.j,y=e.k,T=e.l,I=e.m,E=e.p,k=e.q,S=e.s,M=e.F,_=e.v,A=e.x,D=e.y,P=e.z,O=e.A,F=e.B,L=e.C,R=e.T,N=e.D,j=e.E,C=e.G,B=e.H,H=e.I,U=e.J,$=e.K,z=e.L},e=>{K=e._,V=e.d,q=e.D,W=e.g,G=e.u,J=e.a,X=e.b,Q=e.c},e=>{Y=e.O,Z=e._,ee=e.a,te=e.A},e=>{re=e.s}],execute:function(){var t=document.createElement("style");t.textContent='@layer theme{[data-v-4a388fcc]:root,[data-v-4a388fcc]:host{--color-violet-500:oklch(.606 .25 292.717);--color-stone-300:oklch(.869 .005 56.366);--color-stone-400:oklch(.709 .01 56.259);--color-stone-500:oklch(.553 .013 58.071);--color-stone-900:oklch(.216 .006 56.043);--spacing:.25rem;--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--font-weight-bold:700;--aspect-video:16/9}}[data-v-4a388fcc] p{word-break:break-all}[data-v-4a388fcc] strong{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold);color:var(--color-stone-900)}[data-v-4a388fcc] mark{background-color:var(--color-stone-300);color:inherit;border-radius:.25rem;margin-inline:2px;padding-inline:2px}[data-v-4a388fcc] ul{margin-left:calc(var(--spacing)*5);flex-direction:column;list-style-type:disc;display:flex}[data-v-4a388fcc] ol{margin-left:calc(var(--spacing)*5);flex-direction:column;list-style-type:decimal;display:flex}[data-v-4a388fcc] li::marker{color:var(--color-stone-400)}:is([data-v-4a388fcc] h1,[data-v-4a388fcc] .ProseMirror>h1){font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height));text-wrap:pretty;color:var(--color-stone-500)}:is([data-v-4a388fcc] h2,[data-v-4a388fcc] .ProseMirror>h2){font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height));text-wrap:pretty;color:var(--color-stone-500)}[data-v-4a388fcc] hr{border-top-style:var(--tw-border-style);border-top-width:0;border-bottom-style:var(--tw-border-style);--tw-border-style:dashed;border-style:dashed;border-bottom-width:2px;border-bottom-color:var(--color-stone-400);min-height:.875rem;margin-bottom:.875rem}[data-v-4a388fcc] .ProseMirror>hr{margin-bottom:calc(var(--spacing)*0);border-style:var(--tw-border-style);--tw-border-style:dashed;border-style:dashed;border-width:2px;border-color:var(--color-stone-400);border-radius:.25rem;min-height:1.75rem}[data-v-4a388fcc] blockquote{border-left-style:var(--tw-border-style);border-left-width:3px;border-left-color:var(--color-stone-500);background-color:var(--color-stone-300);padding-left:calc(var(--spacing)*2)}[data-v-4a388fcc] a{cursor:pointer;--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold);color:var(--color-violet-500)}@media (width>=64rem){[data-v-4a388fcc] iframe{width:584px}}@media (width>=80rem){[data-v-4a388fcc] iframe{width:calc(42rem - 40px)}}@media (width>=64rem){[data-v-4a388fcc] iframe{height:424px}}@media (width>=80rem){[data-v-4a388fcc] iframe{height:calc(42rem - 200px)}}[data-v-4a388fcc] iframe{aspect-ratio:var(--aspect-video)}@media (width<48rem){[data-v-4a388fcc] iframe{max-width:256px}}@media (width>=48rem){[data-v-4a388fcc] iframe{max-width:508px}}@media (width>=80rem){[data-v-4a388fcc] iframe{max-width:612px}}[data-v-4a388fcc] a{cursor:pointer;--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}[data-v-4a388fcc] a:is(*){color:var(--color-violet-500)}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}/*! tailwindcss v4.0.8 | MIT License | https://tailwindcss.com */@layer theme{[data-v-f850bd22]:root,[data-v-f850bd22]:host{--color-red-600:oklch(.577 .245 27.325);--font-weight-bold:700}}.isEditor[data-v-f850bd22]{background-size:10px 10px;background-image:repeating-linear-gradient(315deg,var(--imageIsEditor)0,var(--imageIsEditor)1px,transparent 0,transparent 50%)}.isOverText[data-v-f850bd22]{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold);color:var(--color-red-600)}@property --tw-font-weight{syntax:"*";inherits:false}\n/*$vite$:1*/',document.head.appendChild(t);const le=["innerHTML"],ne=K(a({__name:"DArticle",props:{propsArticleTempl:{}},setup(e){const t=e,r=o("");s((()=>{const e=JSON.parse(t.propsArticleTempl.articleHtmlRef);r.value=l(e??'\n    {\n        "type":"doc",\n        "content":[{\n            "type":"paragraph",\n            "content":[{\n                "type":"text",\n                "text":" "\n            }]\n        }]\n    }\n',n)}));const a=i((()=>{const e=t.propsArticleTempl?.isDomainFormat;return e}));return(e,t)=>(p(),u("article",{innerHTML:d(r),class:c([{"amDomain-format":d(a)}])},null,10,le))}}),[["__scopeId","data-v-4a388fcc"]]),ae={class:"border-l mt-10 pl-5 border-dashed border-stone-400"},oe={class:"flex gap-2 py-3 border-b border-stone-400"},se={class:"text-lg font-bold leading-4"},ie={class:"text-[12px] leading-4"},ue={class:"flex mt-5"},ce=a({__name:"MessageTempl",props:{propsMessageTempl:{}},setup(e){const t=e,r=i((()=>({articleHtmlRef:t.propsMessageTempl.articleHtmlRef,isDomainFormat:t.propsMessageTempl.isDomainFormat})));return o(""),i((()=>[Y.REPORT])),(e,l)=>{const n=Z,a=ne;return p(),u("div",ae,[m("div",oe,[m("p",se,f(t.propsMessageTempl.floor)+"樓 ",1),m("p",ie,[v(n,{paramTime:t.propsMessageTempl.time,fromNow:""},null,8,["paramTime"])])]),m("div",ue,[v(a,{propsArticleTempl:d(r)},null,8,["propsArticleTempl"])])])}}}),de={class:"flex gap-1"},pe=["disabled"],me={class:"flex items-center p-1.5 rounded"},fe={class:"mr-1"},ve=["disabled"],he={class:"flex items-center p-1.5 rounded"},be={class:"mr-1"},ge=a({__name:"RatingBarComponents",props:{ratingTable:{required:!0},ratingTableModifiers:{},rated:{},ratedModifiers:{}},emits:["update:ratingTable","update:rated"],setup(e){const t=h(),r=b(),l=V(q,"articles",t.article),n=o(),a=o(!1);s((async()=>{const e=await W(l);n.value=e.data().analyze,a.value=n.value.ratedLists?.hasOwnProperty(r.name),console.log(a)}));const i=async e=>{if(!n.value)return;y.value.nice+=e.nice??0,y.value.bad+=e.bad??0,a.value=!0,T.value={nice:e.nice??0,bad:e.bad??0};const t=n.value.rating.nice+T.value.nice,o=n.value.rating.bad+T.value.bad;await G(l,{analyze:{rating:{nice:t,bad:o},ratedLists:{[r.name]:e}}},{merge:!0})},y=g(e,"ratingTable"),T=g(e,"rated");return(e,t)=>{const r=w("Icon");return p(),u("div",de,[m("button",{disabled:d(a),onClick:t[0]||(t[0]=x((e=>i({nice:1})),["stop"])),class:c(["normal-button disabled:select-none disabled:text-stone-500/70",[{"select-none text-stone-500/70":T.value}]])},[m("div",me,[m("p",fe,f(y.value.nice),1),v(r,{icon:"ic:sharp-thumb-up-alt",class:"w-5 h-5"})])],10,pe),m("button",{disabled:d(a),onClick:t[1]||(t[1]=x((e=>i({bad:1})),["stop"])),class:c(["normal-button disabled:select-none disabled:text-stone-500/70",[{"select-none text-stone-500/70":T.value}]])},[m("div",he,[m("p",be,f(y.value.bad),1),v(r,{icon:"ic:sharp-thumb-down-alt",class:"w-5 h-5"})])],10,ve)])}}});var xe;let we=Symbol("headlessui.useid"),ye=0;const Te=null!=(xe=y)?xe:function(){return T(we,(()=>""+ ++ye))()};function Ie(e){var t;if(null==e||null==e.value)return null;let r=null!=(t=e.value.$el)?t:e.value;return r instanceof Node?r:null}function Ee(e,t,...r){if(e in t){let l=t[e];return"function"==typeof l?l(...r):l}let l=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map((e=>`"${e}"`)).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,Ee),l}var ke=Object.defineProperty,Se=(e,t,r)=>(((e,t,r)=>{t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);let Me=new class{constructor(){Se(this,"current",this.detect()),Se(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}};function _e(e){if(Me.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(null!=e&&e.hasOwnProperty("value")){let t=Ie(e);if(t)return t.ownerDocument}return document}let Ae=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>`${e}:not([tabindex='-1'])`)).join(",");var De=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(De||{}),Pe=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Pe||{}),Oe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Oe||{});function Fe(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(Ae)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var Le=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Le||{});function Re(e,t=0){var r;return e!==(null==(r=_e(e))?void 0:r.body)&&Ee(t,{0:()=>e.matches(Ae),1(){let t=e;for(;null!==t;){if(t.matches(Ae))return!0;t=t.parentElement}return!1}})}function Ne(e){let t=_e(e);I((()=>{t&&!Re(t.activeElement,0)&&function(e){null==e||e.focus({preventScroll:!0})}(e)}))}var je=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(je||{});"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let Ce=["textarea","input"].join(",");function Be(e,t=e=>e){return e.slice().sort(((e,r)=>{let l=t(e),n=t(r);if(null===l||null===n)return 0;let a=l.compareDocumentPosition(n);return a&Node.DOCUMENT_POSITION_FOLLOWING?-1:a&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function He(e,t){return function(e,t,{sorted:r=!0,relativeTo:l=null,skipElements:n=[]}={}){var a;let o=null!=(a=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:null==e?void 0:e.ownerDocument)?a:document,s=Array.isArray(e)?r?Be(e):e:Fe(e);n.length>0&&s.length>1&&(s=s.filter((e=>!n.includes(e)))),l=null!=l?l:o.activeElement;let i,u=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,s.indexOf(l))-1;if(4&t)return Math.max(0,s.indexOf(l))+1;if(8&t)return s.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),d=32&t?{preventScroll:!0}:{},p=0,m=s.length;do{if(p>=m||p+m<=0)return 0;let e=c+p;if(16&t)e=(e+m)%m;else{if(e<0)return 3;if(e>=m)return 1}i=s[e],null==i||i.focus(d),p+=u}while(i!==o.activeElement);return 6&t&&function(e){var t,r;return null!=(r=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,Ce))&&r}(i)&&i.select(),2}(Fe(),t,{relativeTo:e})}function Ue(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0||/Android/gi.test(window.navigator.userAgent)}function $e(e,t,r){Me.isServer||E((l=>{document.addEventListener(e,t,r),l((()=>document.removeEventListener(e,t,r)))}))}function ze(e,t,r=i((()=>!0))){function l(l,n){if(!r.value||l.defaultPrevented)return;let a=n(l);if(null===a||!a.getRootNode().contains(a))return;let o=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(e);for(let e of o){if(null===e)continue;let t=e instanceof HTMLElement?e:Ie(e);if(null!=t&&t.contains(a)||l.composed&&l.composedPath().includes(t))return}return!Re(a,Le.Loose)&&-1!==a.tabIndex&&l.preventDefault(),t(l,a)}let n=o(null);$e("pointerdown",(e=>{var t,l;r.value&&(n.value=(null==(l=null==(t=e.composedPath)?void 0:t.call(e))?void 0:l[0])||e.target)}),!0),$e("mousedown",(e=>{var t,l;r.value&&(n.value=(null==(l=null==(t=e.composedPath)?void 0:t.call(e))?void 0:l[0])||e.target)}),!0),$e("click",(e=>{Ue()||n.value&&(l(e,(()=>n.value)),n.value=null)}),!0),$e("touchend",(e=>l(e,(()=>e.target instanceof HTMLElement?e.target:null))),!0),function(e,t,r){Me.isServer||E((l=>{window.addEventListener(e,t,r),l((()=>window.removeEventListener(e,t,r)))}))}("blur",(e=>l(e,(()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null))),!0)}function Ke(e,t){if(e)return e;let r=null!=t?t:"button";return"string"==typeof r&&"button"===r.toLowerCase()?"button":void 0}function Ve(e){return[e.screenX,e.screenY]}function qe(){let e=o([-1,-1]);return{wasMoved(t){let r=Ve(t);return(e.value[0]!==r[0]||e.value[1]!==r[1])&&(e.value=r,!0)},update(t){e.value=Ve(t)}}}var We,Ge=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ge||{}),Je=((We=Je||{})[We.Unmount=0]="Unmount",We[We.Hidden=1]="Hidden",We);function Xe({visible:e=!0,features:t=0,ourProps:r,theirProps:l,...n}){var a;let o=Ze(l,r),s=Object.assign(n,{props:o});return e||2&t&&o.static?Qe(s):1&t?Ee(null==(a=o.unmount)||a?0:1,{0:()=>null,1:()=>Qe({...n,props:{...o,hidden:!0,style:{display:"none"}}})}):Qe(s)}function Qe({props:e,attrs:t,slots:r,slot:l,name:n}){var a,o;let{as:s,...i}=function(e,t=[]){let r=Object.assign({},e);for(let l of t)l in r&&delete r[l];return r}(e,["unmount","static"]),u=null==(a=r.default)?void 0:a.call(r,l),c={};if(l){let e=!1,t=[];for(let[r,n]of Object.entries(l))"boolean"==typeof n&&(e=!0),!0===n&&t.push(r);e&&(c["data-headlessui-state"]=t.join(" "))}if("template"===s){if(u=Ye(null!=u?u:[]),Object.keys(i).length>0||Object.keys(t).length>0){let[e,...r]=null!=u?u:[];if(!function(e){return null!=e&&("string"==typeof e.type||"object"==typeof e.type||"function"==typeof e.type)}(e)||r.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${n} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(i).concat(Object.keys(t)).map((e=>e.trim())).filter(((e,t,r)=>r.indexOf(e)===t)).sort(((e,t)=>e.localeCompare(t))).map((e=>`  - ${e}`)).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>`  - ${e}`)).join("\n")].join("\n"));let l=Ze(null!=(o=e.props)?o:{},i,c),a=k(e,l,!0);for(let t in l)t.startsWith("on")&&(a.props||(a.props={}),a.props[t]=l[t]);return a}return Array.isArray(u)&&1===u.length?u[0]:u}return S(s,Object.assign({},i,c),{default:()=>u})}function Ye(e){return e.flatMap((e=>e.type===M?Ye(e.children):[e]))}function Ze(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},r={};for(let l of e)for(let e in l)e.startsWith("on")&&"function"==typeof l[e]?(null!=r[e]||(r[e]=[]),r[e].push(l[e])):t[e]=l[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(r).map((e=>[e,void 0]))));for(let l in r)Object.assign(t,{[l](e,...t){let n=r[l];for(let r of n){if(e instanceof Event&&e.defaultPrevented)return;r(e,...t)}}});return t}let et=Symbol("Context");var tt=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(tt||{}),rt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(rt||{}),lt=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(lt||{});function nt(e,t){let r=t.resolveItems();if(r.length<=0)return null;let l=t.resolveActiveIndex(),n=null!=l?l:-1;switch(e.focus){case 0:for(let e=0;e<r.length;++e)if(!t.resolveDisabled(r[e],e,r))return e;return l;case 1:-1===n&&(n=r.length);for(let e=n-1;e>=0;--e)if(!t.resolveDisabled(r[e],e,r))return e;return l;case 2:for(let e=n+1;e<r.length;++e)if(!t.resolveDisabled(r[e],e,r))return e;return l;case 3:for(let e=r.length-1;e>=0;--e)if(!t.resolveDisabled(r[e],e,r))return e;return l;case 4:for(let l=0;l<r.length;++l)if(t.resolveId(r[l],l,r)===e.id)return l;return l;case 5:return null;default:!function(e){throw new Error("Unexpected object: "+e)}(e)}}let at=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ot(e){var t,r;let l=null!=(t=e.innerText)?t:"",n=e.cloneNode(!0);if(!(n instanceof HTMLElement))return l;let a=!1;for(let s of n.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))s.remove(),a=!0;let o=a?null!=(r=n.innerText)?r:"":l;return at.test(o)&&(o=o.replace(at,"")),o}function st(e){let t=o(""),r=o("");return()=>{let l=Ie(e);if(!l)return"";let n=l.innerText;if(t.value===n)return r.value;let a=function(e){let t=e.getAttribute("aria-label");if("string"==typeof t)return t.trim();let r=e.getAttribute("aria-labelledby");if(r){let e=r.split(" ").map((e=>{let t=document.getElementById(e);if(t){let e=t.getAttribute("aria-label");return"string"==typeof e?e.trim():ot(t).trim()}return null})).filter(Boolean);if(e.length>0)return e.join(", ")}return ot(e).trim()}(l).trim().toLowerCase();return t.value=n,r.value=a,a}}var it=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(it||{}),ut=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ut||{});let ct=Symbol("MenuContext");function dt(e){let t=T(ct,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,dt),t}return t}let pt=a({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:r}){let l=o(1),n=o(null),a=o(null),s=o([]),u=o(""),c=o(null),d=o(1);function p(e=e=>e){let t=null!==c.value?s.value[c.value]:null,r=Be(e(s.value.slice()),(e=>Ie(e.dataRef.domRef))),l=t?r.indexOf(t):null;return-1===l&&(l=null),{items:r,activeItemIndex:l}}let m={menuState:l,buttonRef:n,itemsRef:a,items:s,searchQuery:u,activeItemIndex:c,activationTrigger:d,closeMenu:()=>{l.value=1,c.value=null},openMenu:()=>l.value=0,goToItem(e,t,r){let l=p(),n=nt(e===lt.Specific?{focus:lt.Specific,id:t}:{focus:e},{resolveItems:()=>l.items,resolveActiveIndex:()=>l.activeItemIndex,resolveId:e=>e.id,resolveDisabled:e=>e.dataRef.disabled});u.value="",c.value=n,d.value=null!=r?r:1,s.value=l.items},search(e){let t=""!==u.value?0:1;u.value+=e.toLowerCase();let r=(null!==c.value?s.value.slice(c.value+t).concat(s.value.slice(0,c.value+t)):s.value).find((e=>e.dataRef.textValue.startsWith(u.value)&&!e.dataRef.disabled)),l=r?s.value.indexOf(r):-1;-1===l||l===c.value||(c.value=l,d.value=1)},clearSearch(){u.value=""},registerItem(e,t){let r=p((r=>[...r,{id:e,dataRef:t}]));s.value=r.items,c.value=r.activeItemIndex,d.value=1},unregisterItem(e){let t=p((t=>{let r=t.findIndex((t=>t.id===e));return-1!==r&&t.splice(r,1),t}));s.value=t.items,c.value=t.activeItemIndex,d.value=1}};return ze([n,a],((e,t)=>{var r;m.closeMenu(),Re(t,Le.Loose)||(e.preventDefault(),null==(r=Ie(n))||r.focus())}),i((()=>0===l.value))),_(ct,m),function(e){_(et,e)}(i((()=>Ee(l.value,{0:tt.Open,1:tt.Closed})))),()=>{let n={open:0===l.value,close:m.closeMenu};return Xe({ourProps:{},theirProps:e,slot:n,slots:t,attrs:r,name:"Menu"})}}}),mt=a({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:t,slots:r,expose:l}){var n;let a=null!=(n=e.id)?n:`headlessui-menu-button-${Te()}`,u=dt("MenuButton");function c(e){switch(e.key){case rt.Space:case rt.Enter:case rt.ArrowDown:e.preventDefault(),e.stopPropagation(),u.openMenu(),I((()=>{var e;null==(e=Ie(u.itemsRef))||e.focus({preventScroll:!0}),u.goToItem(lt.First)}));break;case rt.ArrowUp:e.preventDefault(),e.stopPropagation(),u.openMenu(),I((()=>{var e;null==(e=Ie(u.itemsRef))||e.focus({preventScroll:!0}),u.goToItem(lt.Last)}))}}function d(e){e.key===rt.Space&&e.preventDefault()}function p(t){e.disabled||(0===u.menuState.value?(u.closeMenu(),I((()=>{var e;return null==(e=Ie(u.buttonRef))?void 0:e.focus({preventScroll:!0})}))):(t.preventDefault(),u.openMenu(),function(e){requestAnimationFrame((()=>requestAnimationFrame(e)))}((()=>{var e;return null==(e=Ie(u.itemsRef))?void 0:e.focus({preventScroll:!0})}))))}l({el:u.buttonRef,$el:u.buttonRef});let m=function(e,t){let r=o(Ke(e.value.type,e.value.as));return s((()=>{r.value=Ke(e.value.type,e.value.as)})),E((()=>{var e;r.value||Ie(t)&&Ie(t)instanceof HTMLButtonElement&&(null==(e=Ie(t))||!e.hasAttribute("type"))&&(r.value="button")})),r}(i((()=>({as:e.as,type:t.type}))),u.buttonRef);return()=>{var l;let n={open:0===u.menuState.value},{...o}=e;return Xe({ourProps:{ref:u.buttonRef,id:a,type:m.value,"aria-haspopup":"menu","aria-controls":null==(l=Ie(u.itemsRef))?void 0:l.id,"aria-expanded":0===u.menuState.value,onKeydown:c,onKeyup:d,onClick:p},theirProps:o,slot:n,attrs:t,slots:r,name:"MenuButton"})}}}),ft=a({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:t,slots:r,expose:l}){var n;let a=null!=(n=e.id)?n:`headlessui-menu-items-${Te()}`,s=dt("MenuItems"),u=o(null);function c(e){var t;switch(u.value&&clearTimeout(u.value),e.key){case rt.Space:if(""!==s.searchQuery.value)return e.preventDefault(),e.stopPropagation(),s.search(e.key);case rt.Enter:e.preventDefault(),e.stopPropagation(),null!==s.activeItemIndex.value&&(null==(t=Ie(s.items.value[s.activeItemIndex.value].dataRef.domRef))||t.click()),s.closeMenu(),Ne(Ie(s.buttonRef));break;case rt.ArrowDown:return e.preventDefault(),e.stopPropagation(),s.goToItem(lt.Next);case rt.ArrowUp:return e.preventDefault(),e.stopPropagation(),s.goToItem(lt.Previous);case rt.Home:case rt.PageUp:return e.preventDefault(),e.stopPropagation(),s.goToItem(lt.First);case rt.End:case rt.PageDown:return e.preventDefault(),e.stopPropagation(),s.goToItem(lt.Last);case rt.Escape:e.preventDefault(),e.stopPropagation(),s.closeMenu(),I((()=>{var e;return null==(e=Ie(s.buttonRef))?void 0:e.focus({preventScroll:!0})}));break;case rt.Tab:e.preventDefault(),e.stopPropagation(),s.closeMenu(),I((()=>He(Ie(s.buttonRef),e.shiftKey?De.Previous:De.Next)));break;default:1===e.key.length&&(s.search(e.key),u.value=setTimeout((()=>s.clearSearch()),350))}}function d(e){e.key===rt.Space&&e.preventDefault()}l({el:s.itemsRef,$el:s.itemsRef}),function({container:e,accept:t,walk:r,enabled:l}){E((()=>{let n=e.value;if(!n||void 0!==l&&!l.value)return;let a=_e(e);if(!a)return;let o=Object.assign((e=>t(e)),{acceptNode:t}),s=a.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,o,!1);for(;s.nextNode();)r(s.currentNode)}))}({container:i((()=>Ie(s.itemsRef))),enabled:i((()=>0===s.menuState.value)),accept:e=>"menuitem"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let p=T(et,null),m=i((()=>null!==p?(p.value&tt.Open)===tt.Open:0===s.menuState.value));return()=>{var l,n;let o={open:0===s.menuState.value},{...i}=e;return Xe({ourProps:{"aria-activedescendant":null===s.activeItemIndex.value||null==(l=s.items.value[s.activeItemIndex.value])?void 0:l.id,"aria-labelledby":null==(n=Ie(s.buttonRef))?void 0:n.id,id:a,onKeydown:c,onKeyup:d,role:"menu",tabIndex:0,ref:s.itemsRef},theirProps:i,slot:o,attrs:t,slots:r,features:Ge.RenderStrategy|Ge.Static,visible:m.value,name:"MenuItems"})}}}),vt=a({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:t,attrs:r,expose:l}){var n;let a=null!=(n=e.id)?n:`headlessui-menu-item-${Te()}`,u=dt("MenuItem"),c=o(null);l({el:c,$el:c});let d=i((()=>null!==u.activeItemIndex.value&&u.items.value[u.activeItemIndex.value].id===a)),p=st(c),m=i((()=>({disabled:e.disabled,get textValue(){return p()},domRef:c})));function f(t){if(e.disabled)return t.preventDefault();u.closeMenu(),Ne(Ie(u.buttonRef))}function v(){if(e.disabled)return u.goToItem(lt.Nothing);u.goToItem(lt.Specific,a)}s((()=>u.registerItem(a,m))),A((()=>u.unregisterItem(a))),E((()=>{0===u.menuState.value&&d.value&&0!==u.activationTrigger.value&&I((()=>{var e,t;return null==(t=null==(e=Ie(c))?void 0:e.scrollIntoView)?void 0:t.call(e,{block:"nearest"})}))}));let h=qe();function b(e){h.update(e)}function g(t){h.wasMoved(t)&&(e.disabled||d.value||u.goToItem(lt.Specific,a,0))}function x(t){h.wasMoved(t)&&(e.disabled||d.value&&u.goToItem(lt.Nothing))}return()=>{let{disabled:l,...n}=e,o={active:d.value,disabled:l,close:u.closeMenu};return Xe({ourProps:{id:a,ref:c,role:"menuitem",tabIndex:!0===l?void 0:-1,"aria-disabled":!0===l||void 0,onClick:f,onFocus:v,onPointerenter:b,onMouseenter:b,onPointermove:g,onMousemove:g,onPointerleave:x,onMouseleave:x},theirProps:{...r,...n},slot:o,attrs:r,slots:t,name:"MenuItem"})}}});const ht={class:"inline-flex w-full justify-center p-2"},bt={class:"p-1"},gt=["onClick"],xt=a({__name:"OptionsComponents",props:D({options:{},setIcon:{},isLeftDir:{type:Boolean}},{currentOption:{required:!0},currentOptionModifiers:{}}),emits:["update:currentOption"],setup(e){const t=e,r=o(t.options[0].label),l=17*Math.max(...t.options.map((e=>e.label.length)))+"px",n=g(e,"currentOption");return(e,t)=>{const a=w("Icon");return p(),P(d(pt),{as:"div",class:"relative text-left text-sm font-semibold w-full h-full"},{default:O((()=>[e.setIcon?(p(),P(d(mt),{key:0,class:"hover:cursor-pointer w-full h-full p-5"},{default:O((()=>[v(a,{icon:e.setIcon,class:"w-full h-full"},null,8,["icon"])])),_:1})):(p(),P(d(mt),{key:1,class:"normal-button"},{default:O((()=>[m("div",ht,[m("p",{class:"text-right mr-2",style:F({width:l})},f(d(r)),5),v(a,{icon:"ic:sharp-keyboard-arrow-down",class:"w-5 h-5"})])])),_:1})),v(R,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:O((()=>[v(d(ft),{class:c(["absolute z-20  mt-2 w-56 border-stone-400 border bg-stone-100 shadow-lg ring-1 ring-black/5 focus:outline-none",e.isLeftDir?"origin-top-left left-0":"origin-top-right right-0"])},{default:O((()=>[m("div",bt,[(p(!0),u(M,null,L(e.options,(e=>(p(),P(d(vt),{as:"template"},{default:O((({active:t})=>[m("button",{onClick:x((t=>(e=>{n.value=e.name,r.value=e.label})(e)),["stop"]),class:c([t?e.activeColor:e.color,"flex w-full items-center px-2 py-2 max-sm:text-sm"])},f(e.label),11,gt)])),_:2},1024)))),256))])])),_:1},8,["class"])])),_:1})])),_:1})}}}),wt={class:"border-r border-l border-b border-stone-400"},yt={class:"flex border-b border-stone-400 h-20 items-center"},Tt={class:"ml-auto border-l border-dashed w-20 h-20 border-stone-400"},It={class:"border-l border-dashed border-stone-400 w-20 h-20 flex justify-center items-center"},Et={class:"flex p-5"},kt={class:"flex mt-5 py-2 px-3"},St=a({__name:"ArticleTempl",props:{propsArticleTempl:{}},setup(e){const t=e,r=i((()=>t.propsArticleTempl.history.map((e=>({label:e.tag,name:e.tag,...ee}))))),l=t.propsArticleTempl.history.length,n=o(l>1?l-1:0),a=o(n.value.toString());N(a,(()=>{n.value=Number(a.value)-1,console.log(Number(a.value)-1)}));const s=i((()=>(console.log(t.propsArticleTempl.history[n.value]),{articleHtmlRef:t.propsArticleTempl.history[n.value].articleHtmlRef,isDomainFormat:t.propsArticleTempl.history[n.value].isDomainFormat}))),c=o(""),f=i((()=>[Y.REPORT])),h=i((()=>t.propsArticleTempl.analyze.rating??{})),b=o({rated:t.propsArticleTempl.analyze.ratedLists||{nice:0,bad:0}});return(e,t)=>{const l=xt,n=ne,o=ge;return p(),u("div",wt,[m("div",yt,[m("span",Tt,[v(l,{"set-icon":"ic:round-history",options:d(r),"current-option":d(a),"onUpdate:currentOption":t[0]||(t[0]=e=>j(a)?a.value=e:null)},null,8,["options","current-option"])]),m("span",It,[v(l,{"set-icon":"ic:sharp-more-horiz",options:d(f),"current-option":d(c),"onUpdate:currentOption":t[1]||(t[1]=e=>j(c)?c.value=e:null)},null,8,["options","current-option"])])]),m("div",Et,[v(n,{propsArticleTempl:d(s)},null,8,["propsArticleTempl"])]),m("div",kt,[v(o,{ratingTable:d(h),models_rated:d(b),"onUpdate:models_rated":t[2]||(t[2]=e=>j(b)?b.value=e:null)},null,8,["ratingTable","models_rated"])])])}}}),Mt={class:"relative [--imageIsEditor:var(--color-stone-400)]/50 block"},_t={class:"relative h-full flex gap-1"},At={class:"p-1 h-10 w-10"},Dt={ref:"DeleteButton",class:"DeleteButton w-full h-full rounded hover:cursor-pointer hover:bg-stone-500 hover:text-stone-100 flex items-center justify-center"},Pt=a({__name:"Image",setup(e,{expose:t}){const r=o(),l=o(),n=o(),a=o(),s=o(),i=e=>e>=1048576?Math.round(e/1048576)+"MB":e>=1024?Math.round(e/1024)+"KB":e+"B";return t({formatFileSize:i,initImage:()=>{l.value.src="",r.value?.classList.remove("isEditor"),n.value?.classList.remove("flex"),n.value?.classList.add("hidden"),a.value?.classList.remove("isOverText"),s.value?.classList.add("hidden")},settingImage:(e,t=0)=>{l.value.src=e,t&&(a.value.textContent=i(t),r.value?.classList.add("isEditor"),n.value?.classList.remove("hidden"),n.value?.classList.add("flex"),t>te.FILESIZE&&a.value?.classList.add("isOverText"),t>te.FILESIZE&&s.value?.classList.remove("hidden"))}}),(e,t)=>{const o=w("Icon");return p(),u("div",Mt,[m("div",{ref_key:"Pattern",ref:r,class:c(["p-2 imageBackground flex w-full h-full"])},[m("img",{ref_key:"Image",ref:l,src:"",class:"imageSource flex object-cover rounded-lg max-sm:min-h-[270px] sm:h-[400px]"},null,512)],512),m("div",{ref_key:"Meta",ref:n,class:"hidden metaDiv absolute top-2 right-2 z-10 items-center h-10 bg-stone-200 rounded"},[m("span",_t,[m("p",{ref_key:"FileSizeText",ref:a,class:c(["imageSizeText flex h-full items-center px-2"])},"0kb",512),m("div",{ref_key:"IsFileSizeOverEffect",ref:s,class:c(["absolute h-3 w-3 right-0 top-0 imageSizeEffect hidden"])},t[0]||(t[0]=[m("span",{class:"animate-ping absolute h-3 w-3 rounded-full bg-red-600 opacity-75"},null,-1),m("span",{class:"absolute h-3 w-3 rounded-full bg-red-600"},null,-1)]),512)]),m("div",At,[m("button",Dt,[v(o,{icon:"ic:outline-close",class:"w-full h-full p-1"})],512)])],512)])}}}),Ot=K(Pt,[["__scopeId","data-v-f850bd22"]]),Ft={class:"absolute -z-10"},Lt={class:"[&>div]:xl:first:mt-[100px] [&>div]:md:first:mt-[80px] [&>div]:max-md:first:mt-[60px]"},Rt={key:0,class:"flex w-full justify-between bg-stone-100"},Nt={class:"md:flex max-md:hidden xl:w-[600px] md:w-[400px] flex-col"},jt={class:"sticky top-[100px]"},Ct={class:"text-stone-400 line-clamp-1 text-[0.8rem]"},Bt={class:"line-clamp-1"},Ht={class:"text-[1.2rem]"},Ut={class:"line-clamp-1"},$t={class:"line-clamp-1"},zt={class:"flex flex-col xl:w-[calc(100%-600px)] md:w-[calc(100%-400px)] max-md:w-full"},Kt={class:"w-full xl:max-w-[654px] md:max-w-[550px] xl:min-h-[calc(100dvh-100px-(1.25rem*2))] md:min-h-[calc(100dvh-80px-(1rem*2))] max-md:min-h-[calc(100dvh-60px)]"},Vt={class:"mt-10 flex gap-3 select-none flex-wrap"},qt={class:"flex"},Wt={class:"flex"},Gt={key:1,class:"bg-stone-100 h-dvh"};e("default",a({__name:"ArticlePage",setup(e){const t=h();U();const l=$(),n=i((()=>t.article)),a=o(),c=o([]),b=o("order");N(b,(()=>{re(b.value,c.value)}));const g=o();s((()=>{(async()=>{const e=V(q,"articles",n.value),t=await W(e);console.log(t.data()),a.value=t.data(),c.value=a.value.messages})()}));const x={index:"同領地",letsTalking:"開始聊",asking:"詢問",experience:"心得",feedback:"反饋意見"},w=i((()=>(t.topic=a.value?.alias??"letsTalking",x[a.value?.alias]??"a1*3/3."))),y=i((()=>{const e=a.value?a.value?.history.length-1:0;return console.log(a.value?.history[e].articleTitle),a.value?.history[e].articleTitle??"a1*3/3."})),T=()=>{l.push("/"+a.value?.alias)},I=o(),E=o(),k=e=>{switch(e){case I.value.id:I.value?.scrollIntoView();break;case E.value.id:E.value?.scrollIntoView()}};return(e,t)=>{const n=J,o=Q,s=X,i=St,h=ce,x=r;return p(),u(M,null,[v(n),m("div",Ft,[C(v(Ot,{ref_key:"imageFrameTempl",ref:g},null,512),[[z,!0]])]),m("div",Lt,[d(a)?(p(),u("div",Rt,[m("div",Nt,[m("div",jt,[v(s,{class:"pt-5 flex flex-col xl:min-h-[calc(100dvh-100px-(1.25rem*2))] md:min-h-[calc(100dvh-80px-(1rem*2))] max-md:min-h-[calc(100dvh-60px)]"},{default:O((()=>[m("p",Ct,[v(o,{text:"你處在"})]),m("p",Bt,[v(o,{text:d(w)},null,8,["text"])]),m("h2",Ht,[m("p",Ut,f(d(y)),1)]),m("button",{onClick:T,class:"mt-10 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer line-clamp-1"},[m("p",$t,f(`回到*${d(w)}*討論區`),1)]),m("button",{onClick:t[0]||(t[0]=e=>k("top")),class:"mt-3 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer"},t[5]||(t[5]=[m("p",{class:"line-clamp-1"},"最上方",-1)])),m("button",{onClick:t[1]||(t[1]=e=>k("msg")),class:"mt-3 flex items-center gap-2 text-stone-400 font-bold text-[1.1rem] border p-2 hover:text-stone-700 hover:cursor-pointer"},t[6]||(t[6]=[m("p",{class:"line-clamp-1"},"留言區",-1)]))])),_:1})])]),m("div",zt,[m("div",Kt,[m("div",{ref_key:"topElement",ref:I,id:"top",class:""},[v(i,{propsArticleTempl:d(a)},null,8,["propsArticleTempl"])],512),m("div",{ref_key:"msgElement",ref:E,id:"msg",class:"w-full"},[d(c)&&d(c).length>0?(p(),u(M,{key:0},[m("div",Vt,[m("div",qt,[C(m("input",{type:"radio",id:"order",name:"msg",value:"order","onUpdate:modelValue":t[2]||(t[2]=e=>j(b)?b.value=e:null),class:"hidden peer"},null,512),[[H,d(b)]]),t[7]||(t[7]=m("label",{for:"order",class:"border-dashed border-2 border-transparent hover:border-stone-400 flex items-center cursor-pointer text-stone-400 peer-checked:bg-stone-400 peer-checked:text-white rounded-full xl:py-1 xl:px-4 xl:text-[1rem] md:py-1 md:px-3 md:text-[0.8rem] max-md:py-0.5 max-md:px-2 max-md:text-[0.75rem]"}," 按順序 ",-1))]),m("div",Wt,[C(m("input",{type:"radio",id:"newest",name:"msg",value:"newest","onUpdate:modelValue":t[3]||(t[3]=e=>j(b)?b.value=e:null),class:"hidden peer"},null,512),[[H,d(b)]]),t[8]||(t[8]=m("label",{for:"newest",class:"border-dashed border-2 border-transparent hover:border-stone-400 cursor-pointer text-stone-400 peer-checked:bg-stone-400 peer-checked:text-white rounded-full xl:py-1 xl:px-4 xl:text-[1rem] md:py-1 md:px-3 md:text-[0.8rem] max-md:py-0.5 max-md:px-2 max-md:text-[0.75rem]"}," 最新 ",-1))])]),(p(!0),u(M,null,L(d(c),((e,t)=>(p(),P(h,{key:e.time,propsMessageTempl:e},null,8,["propsMessageTempl"])))),128))],64)):B("",!0),v(s,{class:"flex justify-center my-10"},{default:O((()=>[m("button",{class:"p-2 rounded border-2 border-dashed font-bold text-[1.2rem] text-stone-400 border-stone-400 select-none hover:text-stone-700 hover:border-stone-700 cursor-pointer",onClick:t[4]||(t[4]=e=>d(l).push("/posts"))},"來留個言吧！")])),_:1})],512)])])])):(p(),u("div",Gt))]),v(x)],64)}}}))}}}));

import{a3 as l,U as i,O as o,S as y}from"./index-oIKjAE_j.js";const m={NORMAL_FORMAT:"YYYY.MM.DD HH:mm:ss.SSS",CLOCK_FORMAT:"A HH:mm:ss",DATE_FORMAT:"YYYY.MM.DD A HH:mm"},h={color:"text-stone-700",activeColor:"bg-stone-400 text-stone-100"},T={REPORT:{label:"檢舉",name:"REPORT",color:"text-red-600",activeColor:"bg-red-400 text-stone-100"}},z={FILESIZE:1024*1024*8,IMAGE_WARNING:2,IMAGE_LIMIT:4,WORD_LIMIT:4e3,WORD_WARNING:3970,WORD_LESS_LIMIT:2},c="http://localhost:801/api/",g=(n,e)=>{var t;return i.get("".concat(c,"articles/").concat(n),{params:{from:e.from,to:e.to,hot:(t=e.hot)!=null?t:!1}})},A=n=>i.get("".concat(c,"article/").concat(n));async function I(n,e){const{state:t,isLoading:a,error:s,execute:r}=await l(()=>g(n,e).then(u=>u.data),[]);return{articles:t,isLoading:a,error:s,refetch:r}}const O=async n=>{const{state:e,isLoading:t,error:a,execute:s}=await l(()=>A(n).then(r=>r.data),{});return{articles:e,isLoading:t,error:a,refetch:s}},p=(n,e)=>{switch(n){case"hot":return e.sort((t,a)=>{const s=a.analyze.views+a.analyze.rating.nice+a.analyze.rating.bad,r=t.analyze.views+t.analyze.rating.nice+t.analyze.rating.bad;return s-r});case"cool":return e.sort((t,a)=>{const s=a.analyze.views+a.analyze.rating.nice+a.analyze.rating.bad;return t.analyze.views+t.analyze.rating.nice+t.analyze.rating.bad-s});case"newest":return console.log(e),e.sort((t,a)=>o(a.time).unix()-o(t.time).unix());case"order":return e.sort((t,a)=>o(t.time).unix()-o(a.time).unix());case"mostLiked":return e.sort((t,a)=>a.analyze.rating.nice-t.analyze.rating.nice);case"worst":return e.sort((t,a)=>t.analyze.rating.bad-a.analyze.rating.bad)}},R=async n=>{try{return await i.post("".concat(c,"articles"),n,{headers:{"Content-Type":"application/json"}})}catch(e){throw console.error("Error posting article:",e),e}},M=y("Posts",{state:()=>({alias:"開始聊",aliasName:"letsTalking",inArticleTitle:""})});export{z as A,h as O,m as T,T as a,O as b,I as c,R as p,p as s,M as u};

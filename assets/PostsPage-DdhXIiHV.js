var te=Object.defineProperty;var ee=(s,t,e)=>t in s?te(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var W=(s,t,e)=>ee(s,typeof t!="symbol"?t+"":t,e);import{i as re,r as ne,u as se,A as J,_ as oe,T as ie}from"./DomainTime.vue_vue_type_script_setup_true_lang-DS8h3fL_.js";import{d as Tt,M as ae,s as le,r as P,p as ce,m as de,u as f,N as ue,O as he,P as fe,Q as q,i as kt,c as j,R as pe,g as Lt,h as me,a as Mt,F as $t,e as h,S as ge,f as I,n as A,j as xe,G as rt,U as Ot,E as we,t as Ct,L as It,K as ye,b as Pt,A as zt}from"./index-CsFuihEx.js";import{D as Ft,a as Bt,b as be,_ as ve,c as Se,d as Te,e as ct,P as dt,f as ut,N as L,T as Ee,S as ke,F as Oe,h as Ce,i as Ie,j as ze,k as V}from"./TipTap_Extensions-B7BIk-Gc.js";import{d as nt,D as st,g as Ne,u as mt,h as gt,s as De,_ as Re,a as Ae,b as Je,c as Le}from"./NavigationTempl.vue_vue_type_script_setup_true_lang-Bt85ASxp.js";const Me=Object.freeze(Object.defineProperty({__proto__:null,Decoration:Ft,DecorationSet:Bt,EditorView:be,__endComposition:ve,__parseFromClipboard:Se},Symbol.toStringTag,{value:"Module"}));function Nt(s){return fe((t,e)=>({get(){return t(),s},set(r){s=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{e()})})}}))}class $e extends Te{constructor(t={}){return super(t),this.contentComponent=null,this.appContext=null,this.reactiveState=Nt(this.view.state),this.reactiveExtensionStorage=Nt(this.extensionStorage),this.on("beforeTransaction",({nextState:e})=>{this.reactiveState.value=e,this.reactiveExtensionStorage.value=this.extensionStorage}),ae(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,e){const r=super.registerPlugin(t,e);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(t){const e=super.unregisterPlugin(t);return this.reactiveState&&e&&(this.reactiveState.value=e),e}}const Pe=Tt({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(s){const t=P(),e=ue();return ce(()=>{const r=s.editor;r&&r.options.element&&t.value&&de(()=>{if(!t.value||!r.options.element.firstChild)return;const n=f(t.value);t.value.append(...r.options.element.childNodes),r.contentComponent=e.ctx._,e&&(r.appContext={...e.appContext,provides:e.provides}),r.setOptions({element:n}),r.createNodeViews()})}),he(()=>{const r=s.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:t}},render(){return le("div",{ref:s=>{this.rootEl=s}})}});function Fe(){try{return Me}catch(s){return null}}function Be(s,t){if(s&&typeof s.serializeForClipboard=="function")return s.serializeForClipboard(t);const e=Fe();if(e&&typeof(e==null?void 0:e.__serializeForClipboard)=="function")return e.__serializeForClipboard(s,t);throw new Error("No supported clipboard serialization method found.")}function He(s){const t=s.getBoundingClientRect(),e=s.closest('[role="dialog"]');if(e&&window.getComputedStyle(e).transform!=="none"){const r=e.getBoundingClientRect();return{top:t.top-r.top,left:t.left-r.left,width:t.width}}return{top:t.top,left:t.left,width:t.width}}function Dt(s,t){const e=["li","p:not(:first-child)","pre","blockquote","h1","h2","h3","h4","h5","h6",...t.customNodes.map(r=>"[data-type=".concat(r,"]"))].join(", ");return document.elementsFromPoint(s.x,s.y).find(r=>{var n,i;return((i=(n=r.parentElement)==null?void 0:n.matches)==null?void 0:i.call(n,".ProseMirror"))||r.matches(e)})}function We(s,t,e){var n;const r=s.getBoundingClientRect();return(n=t.posAtCoords({left:r.left+50+e.dragHandleWidth,top:r.top+1}))==null?void 0:n.inside}function Rt(s,t){const e=t.state.doc.resolve(s);return e.depth>1?e.before(e.depth):s}function Ue(s){let t="";function e(o,a){if(a.focus(),!o.dataTransfer)return;const c=Dt({x:o.clientX+50+s.dragHandleWidth,y:o.clientY},s);if(!(c instanceof Element))return;let u=We(c,a,s);if(u==null||u<0)return;u=Rt(u,a);const{from:m,to:T}=a.state.selection,E=m-T,k=Rt(m,a);let g=!1;const b=a.state.doc.resolve(k);if(b.node().type.name==="doc")g=!0;else{const d=L.create(a.state.doc,b.before());g=!(u+1>=d.$from.pos&&u<=d.$to.pos)}let N=a.state.selection;if(!g&&E!==0&&!(a.state.selection instanceof L)){const d=L.create(a.state.doc,T-1);N=Ee.create(a.state.doc,u,d.$to.pos)}else if(N=L.create(a.state.doc,u),N.node.type.isInline||N.node.type.name==="tableRow"){let d=a.state.doc.resolve(N.from);N=L.create(a.state.doc,d.before())}a.dispatch(a.state.tr.setSelection(N)),a.state.selection instanceof L&&a.state.selection.node.type.name==="listItem"&&(t=c.parentElement.tagName);const Z=a.state.selection.content(),{dom:X,text:D}=Be(a,Z);o.dataTransfer.clearData(),o.dataTransfer.setData("text/html",X.innerHTML),o.dataTransfer.setData("text/plain",D),o.dataTransfer.effectAllowed="copyMove",o.dataTransfer.setDragImage(c,0,0),a.dragging={slice:Z,move:o.ctrlKey}}let r=null;function n(){r&&r.classList.add("hide")}function i(){r&&r.classList.remove("hide")}function l(o){if(o.target instanceof Element){const a=o.relatedTarget;if((a==null?void 0:a.classList.contains("tiptap"))||(a==null?void 0:a.classList.contains("drag-handle")))return}n()}return new dt({key:new ut(s.pluginKey),view:o=>{var m,T,E,k;const a=s.dragHandleSelector?document.querySelector(s.dragHandleSelector):null;r=a!=null?a:document.createElement("div"),r.draggable=!0,r.dataset.dragHandle="",r.classList.add("drag-handle");function c(g){e(g,o)}r.addEventListener("dragstart",c);function u(g){n();let b=window.scrollY;g.clientY<s.scrollTreshold?window.scrollTo({top:b-30,behavior:"smooth"}):window.innerHeight-g.clientY<s.scrollTreshold&&window.scrollTo({top:b+30,behavior:"smooth"})}return r.addEventListener("drag",u),n(),a||(T=(m=o==null?void 0:o.dom)==null?void 0:m.parentElement)==null||T.appendChild(r),(k=(E=o==null?void 0:o.dom)==null?void 0:E.parentElement)==null||k.addEventListener("mouseout",l),{destroy:()=>{var g,b,N;a||(g=r==null?void 0:r.remove)==null||g.call(r),r==null||r.removeEventListener("drag",u),r==null||r.removeEventListener("dragstart",c),r=null,(N=(b=o==null?void 0:o.dom)==null?void 0:b.parentElement)==null||N.removeEventListener("mouseout",l)}}},props:{handleDOMEvents:{mousemove:(o,a)=>{if(!o.editable)return;const c=Dt({x:a.clientX+50+s.dragHandleWidth,y:a.clientY},s),u=c==null?void 0:c.closest(".not-draggable"),m=s.excludedTags.concat(["ol","ul"]).join(", ");if(!(c instanceof Element)||c.matches(m)||u){n();return}const T=window.getComputedStyle(c),E=parseInt(T.lineHeight,10),k=isNaN(E)?parseInt(T.fontSize)*1.2:E,g=parseInt(T.paddingTop,10),b=He(c);b.top+=(k-24)/2,b.top+=g,c.matches("ul:not([data-type=taskList]) li, ol li")&&(b.left-=s.dragHandleWidth),b.width=s.dragHandleWidth,r&&(r.style.left="".concat(b.left-b.width,"px"),r.style.top="".concat(b.top,"px"),i())},keydown:()=>{n()},mousewheel:()=>{n()},dragstart:o=>{o.dom.classList.add("dragging")},drop:(o,a)=>{var E;o.dom.classList.remove("dragging"),n();let c=null;const u=o.posAtCoords({left:a.clientX,top:a.clientY});if(!u||(o.state.selection instanceof L&&(c=o.state.selection.node),!c))return;const T=o.state.doc.resolve(u.pos).parent.type.name==="listItem";if(o.state.selection instanceof L&&o.state.selection.node.type.name==="listItem"&&!T&&t=="OL"){const k=(E=o.state.schema.nodes.orderedList)==null?void 0:E.createAndFill(null,c),g=new ke(Oe.from(k),0,0);o.dragging={slice:g,move:a.ctrlKey}}},dragend:o=>{o.dom.classList.remove("dragging")}}}})}ct.create({name:"globalDragHandle",addOptions(){return{dragHandleWidth:20,scrollTreshold:100,excludedTags:[],customNodes:[]}},addProseMirrorPlugins(){return[Ue({pluginKey:"globalDragHandle",dragHandleWidth:this.options.dragHandleWidth,scrollTreshold:this.options.scrollTreshold,dragHandleSelector:this.options.dragHandleSelector,excludedTags:this.options.excludedTags,customNodes:this.options.customNodes})]}});function Ht(s,t,e){for(let r=0;;r++){if(r==s.childCount||r==t.childCount)return s.childCount==t.childCount?null:e;let n=s.child(r),i=t.child(r);if(n==i){e+=n.nodeSize;continue}if(!n.sameMarkup(i))return e;if(n.isText&&n.text!=i.text){for(let l=0;n.text[l]==i.text[l];l++)e++;return e}if(n.content.size||i.content.size){let l=Ht(n.content,i.content,e+1);if(l!=null)return l}e+=n.nodeSize}}function Wt(s,t,e,r){for(let n=s.childCount,i=t.childCount;;){if(n==0||i==0)return n==i?null:{a:e,b:r};let l=s.child(--n),o=t.child(--i),a=l.nodeSize;if(l==o){e-=a,r-=a;continue}if(!l.sameMarkup(o))return{a:e,b:r};if(l.isText&&l.text!=o.text){let c=0,u=Math.min(l.text.length,o.text.length);for(;c<u&&l.text[l.text.length-c-1]==o.text[o.text.length-c-1];)c++,e--,r--;return{a:e,b:r}}if(l.content.size||o.content.size){let c=Wt(l.content,o.content,e-1,r-1);if(c)return c}e-=a,r-=a}}class y{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,e,r,n=0,i){for(let l=0,o=0;o<e;l++){let a=this.content[l],c=o+a.nodeSize;if(c>t&&r(a,n+o,i||null,l)!==!1&&a.content.size){let u=o+1;a.nodesBetween(Math.max(0,t-u),Math.min(a.content.size,e-u),r,n+u)}o=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,r,n){let i="",l=!0;return this.nodesBetween(t,e,(o,a)=>{let c=o.isText?o.text.slice(Math.max(t,a)-a,e-a):o.isLeaf?n?typeof n=="function"?n(o):n:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&c||o.isTextblock)&&r&&(l?l=!1:i+=r),i+=c},0),i}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,r=t.firstChild,n=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(r)&&(n[n.length-1]=e.withText(e.text+r.text),i=1);i<t.content.length;i++)n.push(t.content[i]);return new y(n,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let r=[],n=0;if(e>t)for(let i=0,l=0;l<e;i++){let o=this.content[i],a=l+o.nodeSize;a>t&&((l<t||a>e)&&(o.isText?o=o.cut(Math.max(0,t-l),Math.min(o.text.length,e-l)):o=o.cut(Math.max(0,t-l-1),Math.min(o.content.size,e-l-1))),r.push(o),n+=o.nodeSize),l=a}return new y(r,n)}cutByIndex(t,e){return t==e?y.empty:t==0&&e==this.content.length?this:new y(this.content.slice(t,e))}replaceChild(t,e){let r=this.content[t];if(r==e)return this;let n=this.content.slice(),i=this.size+e.nodeSize-r.nodeSize;return n[t]=e,new y(n,i)}addToStart(t){return new y([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new y(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,r=0;e<this.content.length;e++){let n=this.content[e];t(n,r,e),r+=n.nodeSize}}findDiffStart(t,e=0){return Ht(this,t,e)}findDiffEnd(t,e=this.size,r=t.size){return Wt(this,t,e,r)}findIndex(t,e=-1){if(t==0)return ot(0,t);if(t==this.size)return ot(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position ".concat(t," outside of fragment (").concat(this,")"));for(let r=0,n=0;;r++){let i=this.child(r),l=n+i.nodeSize;if(l>=t)return l==t||e>0?ot(r+1,l):ot(r,n);n=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return y.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new y(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return y.empty;let e,r=0;for(let n=0;n<t.length;n++){let i=t[n];r+=i.nodeSize,n&&i.isText&&t[n-1].sameMarkup(i)?(e||(e=t.slice(0,n)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new y(e||t,r)}static from(t){if(!t)return y.empty;if(t instanceof y)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new y([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}y.empty=new y([],0);const xt={index:0,offset:0};function ot(s,t){return xt.index=s,xt.offset=t,xt}class je extends Error{}class C{constructor(t,e,r){this.content=t,this.openStart=e,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let r=jt(this.content,t+this.openStart,e);return r&&new C(r,this.openStart,this.openEnd)}removeBetween(t,e){return new C(Ut(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return C.empty;let r=e.openStart||0,n=e.openEnd||0;if(typeof r!="number"||typeof n!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new C(y.fromJSON(t,e.content),r,n)}static maxOpen(t,e=!0){let r=0,n=0;for(let i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)n++;return new C(t,r,n)}}C.empty=new C(y.empty,0,0);function Ut(s,t,e){let{index:r,offset:n}=s.findIndex(t),i=s.maybeChild(r),{index:l,offset:o}=s.findIndex(e);if(n==t||i.isText){if(o!=e&&!s.child(l).isText)throw new RangeError("Removing non-flat range");return s.cut(0,t).append(s.cut(e))}if(r!=l)throw new RangeError("Removing non-flat range");return s.replaceChild(r,i.copy(Ut(i.content,t-n-1,e-n-1)))}function jt(s,t,e,r){let{index:n,offset:i}=s.findIndex(t),l=s.maybeChild(n);if(i==t||l.isText)return s.cut(0,t).append(e).append(s.cut(t));let o=jt(l.content,t-i-1,e);return o&&s.replaceChild(n,l.copy(o))}const qt=65535,Gt=Math.pow(2,16);function qe(s,t){return s+t*Gt}function At(s){return s&qt}function Ge(s){return(s-(s&qt))/Gt}const Vt=1,_t=2,at=4,Kt=8;class Jt{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(this.delInfo&Kt)>0}get deletedBefore(){return(this.delInfo&(Vt|at))>0}get deletedAfter(){return(this.delInfo&(_t|at))>0}get deletedAcross(){return(this.delInfo&at)>0}}class R{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&R.empty)return R.empty}recover(t){let e=0,r=At(t);if(!this.inverted)for(let n=0;n<r;n++)e+=this.ranges[n*3+2]-this.ranges[n*3+1];return this.ranges[r*3]+e+Ge(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let n=0,i=this.inverted?2:1,l=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?n:0);if(a>t)break;let c=this.ranges[o+i],u=this.ranges[o+l],m=a+c;if(t<=m){let T=c?t==a?-1:t==m?1:e:e,E=a+n+(T<0?0:u);if(r)return E;let k=t==(e<0?a:m)?null:qe(o/3,t-a),g=t==a?_t:t==m?Vt:at;return(e<0?t!=a:t!=m)&&(g|=Kt),new Jt(E,g,k)}n+=u-c}return r?t+n:new Jt(t+n,0,null)}touches(t,e){let r=0,n=At(e),i=this.inverted?2:1,l=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let a=this.ranges[o]-(this.inverted?r:0);if(a>t)break;let c=this.ranges[o+i],u=a+c;if(t<=u&&o==n*3)return!0;r+=this.ranges[o+l]-c}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let n=0,i=0;n<this.ranges.length;n+=3){let l=this.ranges[n],o=l-(this.inverted?i:0),a=l+(this.inverted?0:i),c=this.ranges[n+e],u=this.ranges[n+r];t(o,o+c,a,a+u),i+=u-c}}invert(){return new R(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?R.empty:new R(t<0?[0,-t,0]:[0,0,t])}}R.empty=new R([]);const wt=Object.create(null);class z{getMap(){return R.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=wt[e.stepType];if(!r)throw new RangeError("No step type ".concat(e.stepType," defined"));return r.fromJSON(t,e)}static jsonID(t,e){if(t in wt)throw new RangeError("Duplicate use of step JSON ID "+t);return wt[t]=e,e.prototype.jsonID=t,e}}class O{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new O(t,null)}static fail(t){return new O(null,t)}static fromReplace(t,e,r,n){try{return O.ok(t.replace(e,r,n))}catch(i){if(i instanceof je)return O.fail(i.message);throw i}}}function Et(s,t,e){let r=[];for(let n=0;n<s.childCount;n++){let i=s.child(n);i.content.size&&(i=i.copy(Et(i.content,t,i))),i.isInline&&(i=t(i,e,n)),r.push(i)}return y.fromArray(r)}class F extends z{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),n=r.node(r.sharedDepth(this.to)),i=new C(Et(e.content,(l,o)=>!l.isAtom||!o.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),n),e.openStart,e.openEnd);return O.fromReplace(t,this.from,this.to,i)}invert(){return new B(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new F(e.pos,r.pos,this.mark)}merge(t){return t instanceof F&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new F(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new F(e.from,e.to,t.markFromJSON(e.mark))}}z.jsonID("addMark",F);class B extends z{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new C(Et(e.content,n=>n.mark(this.mark.removeFromSet(n.marks)),t),e.openStart,e.openEnd);return O.fromReplace(t,this.from,this.to,r)}invert(){return new F(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new B(e.pos,r.pos,this.mark)}merge(t){return t instanceof B&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new B(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new B(e.from,e.to,t.markFromJSON(e.mark))}}z.jsonID("removeMark",B);class H extends z{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return O.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return O.fromReplace(t,this.pos,this.pos+1,new C(y.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let r=this.mark.addToSet(e.marks);if(r.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(r))return new H(this.pos,e.marks[n]);return new H(this.pos,this.mark)}}return new Y(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new H(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new H(e.pos,t.markFromJSON(e.mark))}}z.jsonID("addNodeMark",H);class Y extends z{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return O.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return O.fromReplace(t,this.pos,this.pos+1,new C(y.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new H(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Y(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Y(e.pos,t.markFromJSON(e.mark))}}z.jsonID("removeNodeMark",Y);class $ extends z{constructor(t,e,r,n=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=n}apply(t){return this.structure&&vt(t,this.from,this.to)?O.fail("Structure replace would overwrite content"):O.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new R([this.from,this.to-this.from,this.slice.size])}invert(t){return new $(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new $(e.pos,Math.max(e.pos,r.pos),this.slice)}merge(t){if(!(t instanceof $)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?C.empty:new C(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new $(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?C.empty:new C(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new $(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new $(e.from,e.to,C.fromJSON(t,e.slice),!!e.structure)}}z.jsonID("replace",$);class _ extends z{constructor(t,e,r,n,i,l,o=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=n,this.slice=i,this.insert=l,this.structure=o}apply(t){if(this.structure&&(vt(t,this.from,this.gapFrom)||vt(t,this.gapTo,this.to)))return O.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return O.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?O.fromReplace(t,this.from,this.to,r):O.fail("Content does not fit in gap")}getMap(){return new R([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new _(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),n=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||n<e.pos||i>r.pos?null:new _(e.pos,r.pos,n,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new _(e.from,e.to,e.gapFrom,e.gapTo,C.fromJSON(t,e.slice),e.insert,!!e.structure)}}z.jsonID("replaceAround",_);function vt(s,t,e){let r=s.resolve(t),n=e-t,i=r.depth;for(;n>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,n--;if(n>0){let l=r.node(i).maybeChild(r.indexAfter(i));for(;n>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,n--}}return!1}function Ve(s,t){let e=s.resolve(t),r=e.index();return _e(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(r,r+1)}function _e(s,t){return!!(s&&t&&!s.isLeaf&&s.canAppend(t))}class K extends z{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return O.fail("No node at attribute step's position");let r=Object.create(null);for(let i in e.attrs)r[i]=e.attrs[i];r[this.attr]=this.value;let n=e.type.create(r,null,e.marks);return O.fromReplace(t,this.pos,this.pos+1,new C(y.from(n),0,e.isLeaf?0:1))}getMap(){return R.empty}invert(t){return new K(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new K(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new K(e.pos,e.attr,e.value)}}z.jsonID("attr",K);class lt extends z{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let n in t.attrs)e[n]=t.attrs[n];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return O.ok(r)}getMap(){return R.empty}invert(t){return new lt(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new lt(e.attr,e.value)}}z.jsonID("docAttr",lt);let Q=class extends Error{};Q=function s(t){let e=Error.call(this,t);return e.__proto__=s.prototype,e};Q.prototype=Object.create(Error.prototype);Q.prototype.constructor=Q;Q.prototype.name="TransformError";function Ke(s,t,e){let r=[];for(let l=0;l<s.mapping.maps.length;l++){let o=s.mapping.maps[l];if(o){for(let a=0;a<r.length;a++)r[a]=o.map(r[a]);o.forEach((a,c,u,m)=>r.push(u,m))}}let n=[];for(let l=0;l<r.length;l+=2){let o=r[l],a=r[l+1],c=s.doc.resolve(o),u=c.sharedDepth(a),m=c.node(u);for(let T=c.indexAfter(u),E=c.after(u+1);E<=a;++T){let k=m.maybeChild(T);if(!k)break;if(T&&n.indexOf(E)==-1){let g=m.child(T-1);g.type==k.type&&e.includes(g.type)&&n.push(E)}E+=k.nodeSize}}let i=!1;n.sort((l,o)=>l-o);for(let l=n.length-1;l>=0;l--)Ve(s.doc,n[l])&&(t.join(n[l]),i=!0);return i}ct.create({name:"autoJoiner",addOptions(){return{elementsToJoin:[]}},addProseMirrorPlugins(){const s=new ut(this.name),t=[this.editor.schema.nodes.bulletList,this.editor.schema.nodes.orderedList];return this.options.elementsToJoin.forEach(e=>{const r=Ce(e,this.editor.schema);t.push(r)}),[new dt({key:s,appendTransaction(e,r,n){let i=n.tr,l=!1;for(const o of e)l=Ke(o,i,t)||l;if(l)return i}})]}});ct.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new dt({key:new ut("placeholder"),props:{decorations:({doc:s,selection:t})=>{const e=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,n=[];if(!e)return null;const i=this.editor.isEmpty;return s.descendants((l,o)=>{const a=r>=o&&r<=o+l.nodeSize,c=!l.isLeaf&&Ie(l);if((a||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];i&&u.push(this.options.emptyEditorClass);const m=Ft.node(o,o+l.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:o,hasAnchor:a}):this.options.placeholder});n.push(m)}return this.options.includeChildren}),Bt.create(s,n)}}})]}});ct.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:s=>s.length,wordCounter:s=>s.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=s=>{const t=(s==null?void 0:s.node)||this.editor.state.doc;if(((s==null?void 0:s.mode)||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=s=>{const t=(s==null?void 0:s.node)||this.editor.state.doc,e=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(e)}},addProseMirrorPlugins(){let s=!1;return[new dt({key:new ut("characterCount"),appendTransaction:(t,e,r)=>{if(s)return;const n=this.options.limit;if(n==null||n===0){s=!0;return}const i=this.storage.characters({node:r.doc});if(i>n){const l=i-n,o=0,a=l;console.warn("[CharacterCount] Initial content exceeded limit of ".concat(n," characters. Content was automatically trimmed."));const c=r.tr.deleteRange(o,a);return s=!0,c}s=!0},filterTransaction:(t,e)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const n=this.storage.characters({node:e.doc}),i=this.storage.characters({node:t.doc});if(i<=r||n>r&&i>r&&i<=n)return!0;if(n>r&&i>r&&i>n||!t.getMeta("paste"))return!1;const o=t.selection.$head.pos,a=i-r,c=o-a,u=o;return t.deleteRange(c,u),!(this.storage.characters({node:t.doc})>r)}})]}});q.extend(re);q.extend(ne);q.extend(se);q.locale("zh-tw");const it=()=>q.utc().local();class Ye{constructor(){W(this,"timer",null);W(this,"getDomainTime",P(null));this.getDomainTime.value=it()}calculateNextDelay(){return 1e3-it().millisecond()}start(){const t=()=>{this.getDomainTime.value=it();const e=this.calculateNextDelay(),r=it().valueOf()-this.getDomainTime.value.valueOf();console.log("誤差:",r,"ms"),this.timer=setTimeout(t,e)};t()}stop(){this.timer&&(clearTimeout(this.timer),this.timer=null)}getTime(){return this.getDomainTime.value}}new Ye;const yt=20,M=12,U="xid: invalid ID",Yt=new TextEncoder,Qe=new TextDecoder,x=Yt.encode("0123456789abcdefghijklmnopqrstuv"),p=new Uint8Array(256).fill(255);for(let s=0;s<x.length;s++)p[x[s]]=s;const Qt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,bt=Zt(),w=class w extends Uint8Array{constructor(t){if(super(M),t==null){const e=new DataView(this.buffer),r=Math.floor(Date.now()/1e3);e.setUint32(0,r),this[4]=w.machineId[0],this[5]=w.machineId[1],this[6]=w.machineId[2],this[7]=w.pid>>8,this[8]=w.pid&255,w.counter+=1,w.counter>16777215&&(w.counter=0),this[9]=w.counter>>16,this[10]=w.counter&255,this[11]=w.counter&255}else{if(!(t instanceof Uint8Array)||t.length!==M)throw new Error(U);this.set(t)}}static default(){return new w(new Uint8Array(M).fill(0))}static fromValue(t){if(t instanceof w)return t;if(typeof t=="string")return w.parse(t);if(t instanceof Uint8Array&&t.length===M)return new w(t);if(t instanceof ArrayBuffer&&t.byteLength===M)return new w(new Uint8Array(t));if(Array.isArray(t)&&t.length===M&&t.every(e=>typeof e=="number"&&e>=0&&e<=255))return new w(new Uint8Array(t));throw new Error(U)}static parse(t){if(t.length!==yt)throw new Error(U);const e=new w;return e.decode(t),e}decode(t){const e=Yt.encode(t);if(e.length!==yt)throw new Error(U);for(const r of e)if(p[r]==255)throw new Error(U);if(this[11]=p[e[17]]<<6|p[e[18]]<<1|p[e[19]]>>4,x[this[11]<<4&31]!=e[19])throw new Error(U);this[10]=p[e[16]]<<3|p[e[17]]>>2,this[9]=p[e[14]]<<5|p[e[15]],this[8]=p[e[12]]<<7|p[e[13]]<<2|p[e[14]]>>3,this[7]=p[e[11]]<<4|p[e[12]]>>1,this[6]=p[e[9]]<<6|p[e[10]]<<1|p[e[11]]>>4,this[5]=p[e[8]]<<3|p[e[9]]>>2,this[4]=p[e[6]]<<5|p[e[7]],this[3]=p[e[4]]<<7|p[e[5]]<<2|p[e[6]]>>3,this[2]=p[e[3]]<<4|p[e[4]]>>1,this[1]=p[e[1]]<<6|p[e[2]]<<1|p[e[3]]>>4,this[0]=p[e[0]]<<3|p[e[1]]>>2}encode(){const t=new Uint8Array(yt);return t[19]=x[this[11]<<4&31],t[18]=x[this[11]>>1&31],t[17]=x[this[11]>>6|this[10]<<2&31],t[16]=x[this[10]>>3],t[15]=x[this[9]&31],t[14]=x[this[9]>>5|this[8]<<3&31],t[13]=x[this[8]>>2&31],t[12]=x[this[8]>>7|this[7]<<1&31],t[11]=x[this[7]>>4|this[6]<<4&31],t[10]=x[this[6]>>1&31],t[9]=x[this[6]>>6|this[5]<<2&31],t[8]=x[this[5]>>3],t[7]=x[this[4]&31],t[6]=x[this[4]>>5|this[3]<<3&31],t[5]=x[this[3]>>2&31],t[4]=x[this[3]>>7|this[2]<<1&31],t[3]=x[this[2]>>4|this[1]<<4&31],t[2]=x[this[1]>>1&31],t[1]=x[this[1]>>6|this[0]<<2&31],t[0]=x[this[0]>>3],Qe.decode(t)}timestamp(){return new DataView(this.buffer).getUint32(0)}machine(){return new Uint8Array(this.buffer,4,3)}pid(){return this[7]<<8|this[8]}counter(){return this[9]<<16|this[10]<<8|this[11]}isZero(){return super.every(t=>t===0)}toString(){return this.encode()}toBytes(){return new Uint8Array(this.buffer,0,M)}toJSON(){return this.encode()}equals(t){for(let e=0;e<M;e++)if(this[e]!==t[e])return!1;return!0}};W(w,"machineId",Zt()),W(w,"pid",Ze()),W(w,"counter",bt[0]<<16|bt[1]<<8|bt[2]);let St=w;function Zt(){return Qt.getRandomValues(new Uint8Array(3))}function Ze(){if(typeof globalThis=="object"&&"process"in globalThis)return globalThis.process.pid&65535;const s=Qt.getRandomValues(new Uint8Array(2));return s[0]<<8|s[1]}const Xe={class:"border border-dashed border-stone-500"},tr={class:"h-9 flex justify-between relative"},er={class:"flex items-center h-8 px-2 select-none"},rr={class:"flex items-center h-8 px-2 select-none"},nr={class:"flex items-end gap-3 px-5"},sr={class:"font-[monospace] text-xs flex"},or={class:"flex flex-col justify-end items-end h-full text-stone-400"},ir={class:"py-2 w-[100%] overflow-x-scroll",ref:"toolbarRef"},ar={class:"px-3 w-[768px] flex justify-between overflow-auto"},lr=["disabled"],cr=["disabled"],dr=["disabled"],ur=["disabled"],hr=Tt({__name:"TextEditor",props:{articleHtmlRef:{},articleHtmlRefModifiers:{},isDomainFormat:{type:Boolean},isDomainFormatModifiers:{}},emits:["update:articleHtmlRef","update:isDomainFormat"],setup(s){var X;const t=ye(),e=kt(s,"articleHtmlRef"),r=kt(s,"isDomainFormat");let n=P(!0);const i=P(!1),l=P(),o=P(),a=new $e({extensions:[ze],content:(X=e.value)!=null?X:""}),c=j(()=>{try{return a.storage.characterCount.characters()}catch(D){return 0}}),u=j(()=>c.value>=J.WORD_LIMIT),m=j(()=>c.value>=J.WORD_WARNING&&c.value<J.WORD_LIMIT),T=j(()=>V.size>=J.IMAGE_LIMIT),E=j(()=>V.size>=J.IMAGE_WARNING&&V.size<J.IMAGE_LIMIT);pe(l,()=>i.value=!1,{ignore:[o]});const k=Lt(),g=me(),b=P(!1),N=()=>{try{const D=a.getJSON();if(!D||!D.content||D.content.length===0)return"";const d=D.content.find(v=>v.type==="paragraph"&&v.content&&v.content.length>0);if(d&&d.content)return d.content.filter(v=>v.type==="text").map(v=>v.text).join("")}catch(D){console.error("提取段落文本錯誤:",D)}return""},Z=async()=>{var D,d,v,tt;try{b.value=!0;const S={type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"".concat(g.name," 想發文, 但沒有內容")}]}]},Xt=k.topic==="index"?"letsTalking":k.topic,ht=q().valueOf(),G=new St;if(k.article){const et=nt(st,"articles",k.article),ft=(await Ne(et)).data(),pt={articleTitle:N(),articleHtmlRef:(D=e.value)!=null?D:JSON.stringify(S),isDomainFormat:(d=r.value)!=null?d:!1,time:ht,tag:"".concat(N()),floor:ft.messages.length+1};await mt(et,{messages:gt(pt)})}else{const et={xid:G.toString(),user:g.name,time:ht,analyze:{rating:{nice:0,bad:0},ratedLists:{},views:0},path:G.toString(),alias:Xt,history:[{articleTitle:N(),articleHtmlRef:(v=e.value)!=null?v:JSON.stringify(S),isDomainFormat:(tt=r.value)!=null?tt:!1,time:ht,tag:"".concat(N(),"(原文)")}],messages:[]};await De(nt(st,"articles",G.toString()),et);const ft=nt(st,"topics",k.topic),pt=nt(st,"topics","index");await mt(ft,{articleIDs:gt(G.toString())}),await mt(pt,{articleIDs:gt(G.toString())})}t.push("/")}catch(S){console.error("發文錯誤:",S),b.value=!1}};return(D,d)=>{const v=xe("Icon"),tt=oe;return Pt(),Mt($t,null,[h("div",Xe,[d[19]||(d[19]=ge(" 空測試 ")),I(f(Pe),{editor:f(a),class:A({"amDomain-format-editorMode":r.value})},null,8,["editor","class"]),h("div",tr,[h("button",{ref_key:"editorOptionsButtonRef",ref:o,class:"ml-3 hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",onClick:d[0]||(d[0]=S=>i.value=!f(i))},[I(v,{icon:"ic:sharp-menu",width:"24",height:"24"})],512),h("div",{ref_key:"editorOptionsRef",ref:l,class:A("absolute left-0 mx-3  bottom-10 flex w-44 font-semibold text-sm border border-stone-400/50 bg-stone-300/10 p-1 rounded-lg backdrop-blur-sm bg-opacity-20 z-10  flex-col\n                    ".concat(f(i)?"":"hidden"))},[h("div",er,[rt(h("input",{"onUpdate:modelValue":d[1]||(d[1]=S=>r.value=S),class:"w-4 h-4 hover:cursor-pointer",id:"editorGap",type:"checkbox",value:"true",checked:""},null,512),[[Ot,r.value]]),d[15]||(d[15]=h("label",{class:"w-full hover:cursor-pointer pl-2",for:"editorGap"},"同領地格式",-1))]),h("div",rr,[rt(h("input",{"onUpdate:modelValue":d[2]||(d[2]=S=>we(n)?n.value=S:n=S),class:"w-4 h-4 hover:cursor-pointer",id:"autoGap",type:"checkbox",value:"true",checked:""},null,512),[[Ot,f(n)]]),d[16]||(d[16]=h("label",{class:"w-full hover:cursor-pointer pl-2",for:"autoGap"},"中英文自動空白",-1))])],2),h("div",nr,[h("div",sr,[I(tt,{isClock:"",paramFormat:f(ie).CLOCK_FORMAT},null,8,["paramFormat"])]),h("div",or,[h("div",{class:A({"text-xs font-[monospace] ":!0,"text-red-600 font-bold":f(u),"text-orange-400":f(m)})},Ct("".concat(f(c),"/").concat(f(J).WORD_LIMIT))+"字 ",3),h("div",{class:A({"text-xs font-[monospace]":!0,"text-red-600 font-bold":f(T),"text-orange-400":f(E)})},Ct("".concat(f(V).size,"/").concat(f(J).IMAGE_LIMIT))+"圖 ",3)])])]),h("div",ir,[h("span",ar,[h("button",{class:"hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",onClick:d[3]||(d[3]=S=>f(a).chain().focus().undo().run()),disabled:!f(a).can().chain().focus().undo().run()},[I(v,{icon:"ic:baseline-undo",width:"24",height:"24"})],8,lr),h("button",{class:"hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",onClick:d[4]||(d[4]=S=>f(a).chain().focus().redo().run()),disabled:!f(a).can().chain().focus().redo().run()},[I(v,{icon:"ic:sharp-redo",width:"24",height:"24"})],8,cr),h("button",{class:"hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",onClick:d[5]||(d[5]=S=>{f(a).chain().focus().clearContent(!0).run(),f(V).clear()})},[I(v,{icon:"ic:round-restore-page",width:"24",height:"24"})]),h("button",{class:A(["hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",{"border-stone-400 bg-stone-400 text-stone-100":f(a).isActive("bold")}]),onClick:d[6]||(d[6]=S=>f(a).chain().focus().toggleBold().run()),disabled:!f(a).can().chain().focus().toggleBold().run()},[I(v,{icon:"ic:round-format-bold",width:"24",height:"24"})],10,dr),h("button",{class:A(["hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",{"border-stone-400 bg-stone-400 text-stone-100":f(a).isActive("highlight")}]),onClick:d[7]||(d[7]=S=>f(a).chain().focus().toggleHighlight().run())},[I(v,{icon:"ic:baseline-texture",width:"24",height:"24"})],2),h("button",{class:A(["hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",{"border-stone-400 bg-stone-400 text-stone-100":f(a).isActive("bulletList")}]),onClick:d[8]||(d[8]=S=>f(a).chain().focus().toggleBulletList().run())},[I(v,{icon:"ic:round-format-list-bulleted",width:"24",height:"24"})],2),h("button",{class:A(["hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",{"border-stone-400 bg-stone-400 text-stone-100":f(a).isActive("orderedList")}]),onClick:d[9]||(d[9]=S=>f(a).chain().focus().toggleOrderedList().run())},[I(v,{icon:"ic:sharp-format-list-numbered",width:"24",height:"24"})],2),h("button",{class:A(["hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",{"border-stone-400 bg-stone-400 text-stone-100":f(a).isActive("heading",{level:1})}]),onClick:d[10]||(d[10]=S=>f(a).chain().focus().toggleHeading({level:1}).run())},d[17]||(d[17]=[h("span",{class:"flex font-bold items-baseline"},[h("b",null,"H"),h("small",null,"1")],-1)]),2),h("button",{class:A(["hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",{"border-stone-400 bg-stone-400 text-stone-100":f(a).isActive("heading",{level:2})}]),onClick:d[11]||(d[11]=S=>f(a).chain().focus().toggleHeading({level:2}).run())},d[18]||(d[18]=[h("span",{class:"flex font-bold items-baseline"},[h("b",null,"H"),h("small",null,"2")],-1)]),2),h("button",{class:A(["hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",{"border-stone-400 bg-stone-400 text-stone-100":f(a).isActive("horizontalRule")}]),onClick:d[12]||(d[12]=S=>f(a).chain().focus().setHorizontalRule().run())},[I(v,{icon:"ic:sharp-horizontal-rule",width:"24",height:"24"})],2),h("button",{class:A(["hover:border-stone-400 hover:cursor-pointer w-9 h-9 flex justify-center items-center border-2 border-dashed border-transparent rounded",{"border-stone-400 bg-stone-400 text-stone-100":f(a).isActive("blockquote")}]),onClick:d[13]||(d[13]=S=>f(a).chain().focus().toggleBlockquote().run())},[I(v,{icon:"ic:baseline-format-quote",width:"24",height:"24"})],2)])],512)]),d[20]||(d[20]=h("div",{class:"text-[0.8rem] text-center"}," 左右滑動選擇工具 ",-1)),h("div",null,[h("button",{disabled:f(b),class:"cursor-pointer h-9 flex justify-center items-center border-2 border-dashed border-stone-400 rounded px-2 disabled:cursor-not-allowed not-disabled:focus-visible:outline-2 not-disabled:focus-visible:outline-offset-2 not-disabled:focus-visible:outline-stone-600",type:"submit",onClickOnce:d[14]||(d[14]=S=>Z())},[rt(h("p",null,[I(v,{class:"w-9 h-9",icon:"line-md:loading-twotone-loop"})],512),[[It,f(b)]]),rt(h("p",null," 確認發文 ",512),[[It,!f(b)]])],40,ur)])],64)}}}),fr=Re(hr,[["__scopeId","data-v-a18aaf3d"]]),pr={class:"bg-stone-100 [&>div]:xl:first:mt-[100px] [&>div]:md:first:mt-[80px] [&>div]:max-md:first:mt-[60px]"},mr={class:"flex w-full"},gr={class:"xl:w-[600px] md:w-[400px] md:flex max-md:hidden flex-col"},xr={class:"sticky top-[100px]"},wr={class:"text-[1.1rem]"},yr={class:"w-full xl:max-w-[654px] md:max-w-[550px]"},kr=Tt({__name:"PostsPage",setup(s){const t=Lt(),e="你準備在 ".concat(t.topicTitle," 發表"),r="你正要在 ".concat(t.articleTitle," 留言"),n=j(()=>t.article===""?e:r);return console.log(t.topic),(i,l)=>{const o=Ae,a=Le,c=Je,u=fr;return Pt(),Mt($t,null,[I(o),h("div",pr,[I(c,{class:"select-none !pt-5 flex justify-center xl:min-h-[calc(100dvh-100px-(1.25rem*2))] md:min-h-[calc(100dvh-80px-(1rem*2))] max-md:min-h-[calc(100dvh-60px)]"},{default:zt(()=>[h("div",mr,[h("div",gr,[h("div",xr,[I(c,{class:"flex flex-col"},{default:zt(()=>[h("p",wr,[I(a,{text:f(n)},null,8,["text"])])]),_:1})])]),h("div",yr,[I(u)])])]),_:1})])],64)}}});export{kr as default};

import{Z as L,_ as A,d as S,Q as m,r as Z,O as k,c as Y,t as _}from"./index-ckjO0zia.js";import{i as E,r as I,u as R,T as F}from"./Constant-BobRPnoL.js";var C={exports:{}};(function(x,r){(function(e,t){x.exports=t()})(A,function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(v,p,i){var y,D=function(a,s,n){n===void 0&&(n={});var o=new Date(a),u=function(c,f){f===void 0&&(f={});var d=f.timeZoneName||"short",z=c+"|"+d,l=t[z];return l||(l=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:c,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:d}),t[z]=l),l}(s,n);return u.formatToParts(o)},h=function(a,s){for(var n=D(a,s),o=[],u=0;u<n.length;u+=1){var c=n[u],f=c.type,d=c.value,z=e[f];z>=0&&(o[z]=parseInt(d,10))}var l=o[3],$=l===24?0:l,g=o[0]+"-"+o[1]+"-"+o[2]+" "+$+":"+o[4]+":"+o[5]+":000",O=+a;return(i.utc(g).valueOf()-(O-=O%1e3))/6e4},w=p.prototype;w.tz=function(a,s){a===void 0&&(a=y);var n,o=this.utcOffset(),u=this.toDate(),c=u.toLocaleString("en-US",{timeZone:a}),f=Math.round((u-new Date(c))/1e3/60),d=15*-Math.round(u.getTimezoneOffset()/15)-f;if(!Number(d))n=this.utcOffset(0,s);else if(n=i(c,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(d,!0),s){var z=n.utcOffset();n=n.add(o-z,"minute")}return n.$x.$timezone=a,n},w.offsetName=function(a){var s=this.$x.$timezone||i.tz.guess(),n=D(this.valueOf(),s,{timeZoneName:a}).find(function(o){return o.type.toLowerCase()==="timezonename"});return n&&n.value};var b=w.startOf;w.startOf=function(a,s){if(!this.$x||!this.$x.$timezone)return b.call(this,a,s);var n=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return b.call(n,a,s).tz(this.$x.$timezone,!0)},i.tz=function(a,s,n){var o=n&&s,u=n||s||y,c=h(+i(),u);if(typeof a!="string")return i(a).tz(u);var f=function($,g,O){var M=$-60*g*1e3,T=h(M,O);if(g===T)return[M,g];var N=h(M-=60*(T-g)*1e3,O);return T===N?[M,T]:[$-60*Math.min(T,N)*1e3,Math.max(T,N)]}(i.utc(a,o).valueOf(),c,u),d=f[0],z=f[1],l=i(d).utcOffset(z);return l.$x.$timezone=u,l},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(a){y=a}}})})(C);var j=C.exports;const B=L(j),G=S({__name:"DomainTime",props:{paramTime:{},paramFormat:{},isClock:{type:Boolean},fromNow:{type:Boolean}},setup(x){m.extend(E),m.extend(I),m.extend(R),m.extend(B),m.tz.setDefault("Asia/Taipei"),m.locale("zh-tw");const r=x,e=r.paramTime?m(r.paramTime):m.utc().tz(),t=Z(m.utc().tz()),v=r.paramFormat||F.NORMAL_FORMAT,p=()=>1e3-m.utc().tz().millisecond();let i=null;const y=()=>{t.value=m.utc().tz(),i=setTimeout(y,p())};(r.isClock||r.fromNow)&&y(),k(()=>{i&&clearTimeout(i)});const D=Y(()=>r.isClock?t.value.format(F.CLOCK_FORMAT):r.fromNow?t.value.diff(e,"day")>=2?e.format(F.DATE_FORMAT):e.fromNow():e.format(v));return(h,w)=>_(D.value)}}),K=(x,r)=>{switch(x){case"hot":return r.sort((e,t)=>{const v=t.analyze.views+t.analyze.rating.nice+t.analyze.rating.bad,p=e.analyze.views+e.analyze.rating.nice+e.analyze.rating.bad;return v-p});case"cool":return r.sort((e,t)=>{const v=t.analyze.views+t.analyze.rating.nice+t.analyze.rating.bad;return e.analyze.views+e.analyze.rating.nice+e.analyze.rating.bad-v});case"newest":return console.log(r),r.sort((e,t)=>t.time-e.time);case"order":return r.sort((e,t)=>e.time-t.time);case"mostLiked":return r.sort((e,t)=>t.analyze.rating.nice-e.analyze.rating.nice);case"worst":return r.sort((e,t)=>e.analyze.rating.bad-t.analyze.rating.bad)}};export{G as _,K as s};

System.register(["./NavigationTempl.vue_vue_type_script_setup_true_lang-legacy-DPo_OE1L.js","./index-legacy-DT6CjNYs.js"],(function(e,t){"use strict";var l,s,a,n,o,u,i,c,d,m,r,v,f,x,p,g,b,h,w,y,_,k,L,j,q,I,O;return{setters:[e=>{l=e.a,s=e.b,a=e.c,n=e.q,o=e.e,u=e.D,i=e.w,c=e.f,d=e.s,m=e.d},e=>{r=e.d,v=e.a,f=e.g,x=e.c,p=e.f,g=e.e,b=e.A,h=e.F,w=e.E,y=e.Q,_=e.R,k=e.I,L=e.r,j=e.N,q=e.G,I=e.H,O=e.o}],execute:function(){const t={class:"bg-stone-100 [&>div]:xl:first:mt-[100px] [&>div]:md:first:mt-[80px] [&>div]:max-md:first:mt-[60px]"},T={class:"sm:mx-auto sm:w-full sm:max-w-sm text-center"},A={class:"mt-10 md:w-[40%] max-md:w-[80%]"},C=["disabled"],N={class:"h-6"},S={key:0,class:"text-red-700 mt-2 font-bold"};e("default",r({__name:"LoginPage",setup(e){const r=v(),D=I(),E=q(),F=f(""),G=f(""),H=f(!1);let P=0;const Q=async()=>{if(!F.value||""===F.value||F.value.length<2)return clearTimeout(P),G.value="*你為什麼不輸入只要兩個字的名稱呢",void(P=setTimeout((()=>{G.value=""}),6e3));H.value=!0;const e=F.value.trim().toLocaleLowerCase();try{const t=n(o(u,"users"),i("name","==",e)),l=await c(t);console.log(l.empty),l.empty?await d(m(u,"users",e),{lastLogin:j().valueOf(),name:e,posting:[],createdAt:j().valueOf()}):await d(m(u,"users",e),{lastLogin:j().valueOf()},{merge:!0}),r.name=e,localStorage.setItem("user",e);const s=E.query.redirect;if(s)return void D.push(s);D.push("/")}catch(t){console.log(t)}};return(e,n)=>{const o=l,u=a,i=L("Icon"),c=s;return O(),x(h,null,[p(o),g("div",t,[p(c,{class:"select-none !pt-5 flex flex-col items-center xl:min-h-[calc(100dvh-100px-(1.25rem*2))] md:min-h-[calc(100dvh-80px-(1rem*2))] max-md:min-h-[calc(100dvh-60px)]"},{default:b((()=>[g("div",T,[p(u,{text:"\n                    匿名註冊也等同登入\n                    有可能使用到別人名稱帳號\n                    但無所謂，不會儲存多重要的資訊\n                    當作大家隨性使用的匿名社群即可\n                "})]),g("div",A,[w(g("input",{"onUpdate:modelValue":n[0]||(n[0]=e=>F.value=e),type:"text",name:"nickname",id:"nickname",autocomplete:"nickname",required:"",class:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-stone-600 sm:text-sm/6"},null,512),[[_,F.value]]),g("button",{disabled:H.value,onClick:Q,class:"flex mt-5 w-full justify-center rounded-md bg-stone-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs disabled:cursor-not-allowed not-disabled:hover:bg-stone-500 not-disabled:focus-visible:outline-2 not-disabled:focus-visible:outline-offset-2 not-disabled:focus-visible:outline-stone-600"},[w(g("p",null,[p(i,{class:"w-6 h-6",icon:"line-md:loading-twotone-loop"})],512),[[k,H.value]]),w(g("p",N," 確認 ",512),[[k,!H.value]])],8,C),G.value?(O(),x("p",S,[p(u,{text:G.value},null,8,["text"])])):y("",!0)])])),_:1})])],64)}}}))}}}));
